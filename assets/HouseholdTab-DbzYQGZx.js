import{j as e}from"./vendor-motion-CrMIN7Qx.js";import{r as p}from"./vendor-react-CNNLD1ro.js";import{c as q,u as Se,b as C,X as ke,o as Me,a as De,f as M,p as E,q as de,r as _,t as X}from"./index-z-HuB-l4.js";import{P as G,C as L,E as $e}from"./CustomTooltip-CmHgguAz.js";import{C as oe,a as ie}from"./chevron-up-DCSKfE1Y.js";import{P as re,S as Fe}from"./search-Yvnsbxhu.js";import{R as B,B as A,X as V,Y as P,T as R,g as K,C as xe,d as Ie,e as ze,L as Ee,h as Te}from"./vendor-charts-DL9kUpgL.js";import{D as me}from"./download-D9tKr1Ba.js";import{T as U}from"./trash-2-BzWPY0s9.js";import"./vendor-firebase-CgghcYGk.js";const Le=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Be=q("camera",Le);const Re=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],he=q("check",Re);const Oe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ue=q("image",Oe);const _e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ve=q("message-square",_e);const Pe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Ke=q("mic",Pe);function Z(r,h){const[u,f]=p.useState(()=>{try{const c=window.localStorage.getItem(r);return c?JSON.parse(c):h}catch(c){return console.error(`Error reading localStorage key "${r}":`,c),h}});return p.useEffect(()=>{try{window.localStorage.setItem(r,JSON.stringify(u))}catch(c){console.error(`Error setting localStorage key "${r}":`,c)}},[r,u]),[u,f]}const ce=[{id:"quick",label:"ìž…ë ¥"},{id:"calendar",label:"ë‹¬ë ¥"},{id:"daily",label:"ì¼ì¼"},{id:"search",label:"ê²€ìƒ‰"},{id:"weekly",label:"ì£¼ê°„"},{id:"monthly",label:"ì›”ê°„"},{id:"compare",label:"ë¹„êµ"},{id:"yearly",label:"ì—°ê°„"},{id:"income",label:"ìˆ˜ìž…"},{id:"fixed",label:"ê³ ì •ì§€ì¶œ"},{id:"installment",label:"í• ë¶€"},{id:"challenge",label:"ì±Œë¦°ì§€"},{id:"pattern",label:"íŒ¨í„´"}],O=(r,h)=>r.find(u=>u.name===h)?.color||"#8B95A1",be=(r,h)=>{const u=`ë‚ ì§œ,ì‹œê°„,ê¸ˆì•¡,ì¹´í…Œê³ ë¦¬,ìž¥ì†Œ,ë©”ëª¨,ê²°ì œìˆ˜ë‹¨,í™˜ë¶ˆ
`,f=r.map(d=>`${d.date},${d.time},${d.amount},${d.category},${d.place||""},${d.memo||""},${d.payment||""},${d.refunded?"Y":"N"}`).join(`
`),c=document.createElement("a");c.href=URL.createObjectURL(new Blob(["\uFEFF"+u+f],{type:"text/csv;charset=utf-8;"})),c.download=h,c.click()},pe=(r,h)=>{const u=r.target.files?.[0];if(!u)return;const f=new FileReader;f.onload=()=>{const c=new window.Image;c.onload=()=>{const d=document.createElement("canvas"),o=Math.min(200/c.width,200/c.height,1);d.width=c.width*o,d.height=c.height*o,d.getContext("2d").drawImage(c,0,0,d.width,d.height),h(d.toDataURL("image/jpeg",.5))},c.src=f.result},f.readAsDataURL(u)};function ee({editForm:r,setEditForm:h,onSave:u,onCancel:f,catNames:c,paymentMethods:d,showRefund:o,showPhoto:m}){const y=p.useRef(null);return e.jsxs("div",{className:"p-3 border border-[#3182F6]/30 rounded-xl space-y-2 animate-fade",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê¸ˆì•¡"}),e.jsx("input",{type:"number",value:r.amount,onChange:s=>h({...r,amount:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("select",{value:r.category,onChange:s=>h({...r,category:s.target.value}),children:c.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ìž¥ì†Œ"}),e.jsx("input",{type:"text",value:r.place,onChange:s=>h({...r,place:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê²°ì œìˆ˜ë‹¨"}),e.jsx("select",{value:r.payment,onChange:s=>h({...r,payment:s.target.value}),children:d.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ë©”ëª¨"}),e.jsx("input",{type:"text",value:r.memo,onChange:s=>h({...r,memo:s.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[o&&e.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-c-text2",children:[e.jsx("input",{type:"checkbox",checked:r.refunded||!1,onChange:s=>h({...r,refunded:s.target.checked}),className:"rounded"})," í™˜ë¶ˆ"]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:y,type:"file",accept:"image/*",capture:"environment",onChange:s=>pe(s,n=>h(l=>({...l,photo:n}))),className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>y.current?.click(),className:"flex items-center gap-1 text-xs text-c-text2 border border-c-border rounded-lg px-2 py-1",children:[e.jsx(ue,{size:12})," ì‚¬ì§„"]}),r.photo&&e.jsx("img",{src:r.photo,className:"w-8 h-8 rounded object-cover"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:u,className:"flex-1 btn-primary py-1.5 text-xs flex items-center justify-center gap-1",children:[e.jsx(he,{size:12})," ì €ìž¥"]}),e.jsx("button",{onClick:f,className:"flex-1 py-1.5 text-xs border border-c-border rounded-xl text-c-text2",children:"ì·¨ì†Œ"})]})]})}function H({tx:r,hideAmounts:h,customCategories:u,onEdit:f,onDelete:c,showDate:d}){return e.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-c-border last:border-0",children:[r.photo&&e.jsx("img",{src:r.photo,className:"w-9 h-9 rounded-lg object-cover shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-base font-medium text-c-text",children:r.place||r.category}),e.jsxs("div",{className:"text-sm text-c-text2",children:[d&&`${r.date} `,r.time," Â· ",e.jsx("span",{style:{color:O(u,r.category)},children:r.category}),r.payment&&e.jsxs("span",{className:"ml-1 text-c-text3",children:["Â· ",r.payment]}),r.refunded&&e.jsx("span",{className:"ml-1 text-green-500 font-medium",children:"í™˜ë¶ˆ"})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:`text-base font-bold ${r.refunded?"text-green-500 line-through":"text-red-500"}`,children:h?"â€¢â€¢â€¢â€¢â€¢":`${r.refunded?"+":"-"}${C(r.amount)}`}),f&&e.jsx("button",{onClick:()=>f(r),className:"text-c-text3 hover:text-[#3182F6] p-1",children:e.jsx(G,{size:15})}),c&&e.jsx("button",{onClick:()=>c(r.id),className:"text-c-text3 hover:text-red-400 p-1",children:e.jsx(U,{size:15})})]})]})}function ut(){const{profile:r,goals:h,budget:u,setBudget:f,transactions:c,fixedExpenses:d,setFixedExpenses:o,addTransaction:m,deleteTransaction:y,updateTransaction:s,hideAmounts:n,customQuickInputs:l,setCustomQuickInputs:t,customCategories:a,setCustomCategories:x,paymentMethods:b,setPaymentMethods:N}=Se(),[w,j]=p.useState("quick"),[v,D]=p.useState(!1),S=p.useMemo(()=>a.map(F=>F.name),[a]),g={transactions:c,hideAmounts:n,customCategories:a,catNames:S,paymentMethods:b,deleteTransaction:y,updateTransaction:s},k=ce.slice(0,4),I=ce.slice(4),T=I.find(F=>F.id===w);return e.jsx("div",{className:"animate-slide",children:e.jsxs("div",{className:"glass flex-1 flex flex-col",children:[e.jsx("div",{className:"grid grid-cols-4 gap-1.5 px-4 pt-4 pb-3",children:k.map(({id:F,label:W})=>e.jsx("button",{onClick:()=>j(F),className:`py-5 text-base font-bold rounded-xl transition-all ${w===F?"bg-[#3182F6] text-white shadow-md shadow-blue-500/25":"text-c-text2 active:bg-c-subtle"}`,children:W},F))}),e.jsxs("button",{onClick:()=>D(!v),className:`flex items-center justify-center gap-2 py-3.5 text-sm font-bold border-b border-c-border transition-all active:bg-c-subtle ${T&&!v?"text-[#3182F6]":"text-c-text3"}`,children:[T&&!v?T.label:v?"ì ‘ê¸°":"ë”ë³´ê¸°",v?e.jsx(oe,{size:16}):e.jsx(ie,{size:16}),!v&&!T&&e.jsxs("span",{className:"text-[10px] text-c-text3 font-medium ml-0.5",children:["+",I.length]})]}),v&&e.jsx("div",{className:"flex flex-wrap gap-2 px-4 py-3 border-b border-c-border animate-fade",children:I.map(({id:F,label:W})=>e.jsx("button",{onClick:()=>{j(F),D(!1)},className:`px-4 py-2.5 rounded-2xl text-sm font-bold transition-all ${w===F?"bg-[#3182F6] text-white shadow-sm shadow-blue-500/20":"glass-inner text-c-text2 active:bg-c-subtle"}`,children:W},F))}),w==="quick"&&e.jsx(We,{addTransaction:m,...g,customQuickInputs:l,setCustomQuickInputs:t,setCustomCategories:x}),w==="calendar"&&e.jsx(qe,{...g}),w==="daily"&&e.jsx(Ue,{budget:u,...g}),w==="search"&&e.jsx(Ye,{...g}),w==="weekly"&&e.jsx(He,{transactions:c,budget:u,hideAmounts:n,profile:r}),w==="monthly"&&e.jsx(Qe,{transactions:c,budget:u,setBudget:f,profile:r,fixedExpenses:d,hideAmounts:n,customCategories:a,catNames:S}),w==="compare"&&e.jsx(Je,{transactions:c,hideAmounts:n,customCategories:a}),w==="yearly"&&e.jsx(Xe,{transactions:c,hideAmounts:n}),w==="income"&&e.jsx(Ge,{profile:r,hideAmounts:n}),w==="fixed"&&e.jsx(et,{fixedExpenses:d,setFixedExpenses:o,hideAmounts:n,customCategories:a,catNames:S}),w==="installment"&&e.jsx(Ze,{hideAmounts:n}),w==="challenge"&&e.jsx(tt,{transactions:c,budget:u,hideAmounts:n}),w==="pattern"&&e.jsx(st,{transactions:c,hideAmounts:n,customCategories:a})]})})}function We({addTransaction:r,hideAmounts:h,customQuickInputs:u,setCustomQuickInputs:f,customCategories:c,setCustomCategories:d,paymentMethods:o,catNames:m,transactions:y,deleteTransaction:s,updateTransaction:n}){const[l,t]=p.useState(!1),[a,x]=p.useState(!1),[b,N]=p.useState(!1),[w,j]=p.useState(!1),[v,D]=p.useState({label:"",amount:"",category:m[0]||"ì‹ë¹„",icon:"ðŸš"}),[S,g]=p.useState({amount:"",category:m[0]||"ì‹ë¹„",memo:"",place:"",payment:"ì¹´ë“œ",photo:null}),[k,I]=p.useState(""),[T,F]=p.useState("ì¹´ë“œ"),[W,je]=p.useState(!1),[te,Q]=p.useState(null),[J,se]=p.useState({}),ae=p.useRef(null),le=new Date().toISOString().split("T")[0],ne=p.useMemo(()=>y.filter(i=>i.date===le).sort((i,$)=>$.time.localeCompare(i.time)).slice(0,10),[y,le]),fe=i=>{const $=new Date;r({id:_(),date:E($),time:X($),amount:i.amount,category:i.category,subcategory:i.label,place:i.label,memo:"",payment:"ì¹´ë“œ",auto:!1})},ge=i=>{if(!i)return;const $=y.find(z=>z.place&&z.place.toLowerCase()===i.toLowerCase());$&&g(z=>({...z,category:$.category}))},ve=()=>{if(!S.amount)return;const i=new Date;r({id:_(),date:E(i),time:X(i),amount:parseInt(S.amount),category:S.category,subcategory:"",place:S.place,memo:S.memo,payment:S.payment,photo:S.photo,auto:!1}),g({amount:"",category:m[0]||"ì‹ë¹„",memo:"",place:"",payment:"ì¹´ë“œ",photo:null}),t(!1)},ye=()=>{const i=k.match(/(\d{1,3}(,\d{3})*)\s*ì›/),$=k.match(/ìŠ¹ì¸\s*([\wê°€-íž£]+)/);if(i){const z=new Date;r({id:_(),date:E(z),time:X(z),amount:parseInt(i[1].replace(/,/g,"")),category:"ê¸°íƒ€",subcategory:"",place:$?$[1]:"ë¯¸í™•ì¸",memo:"SMS ìžë™ì¸ì‹",payment:T,auto:!0}),I(""),x(!1)}},Ne=i=>{Q(i.id),se({amount:i.amount,category:i.category,place:i.place||"",memo:i.memo||"",payment:i.payment||"ì¹´ë“œ",refunded:i.refunded||!1,photo:i.photo||null})},we=()=>{n(te,{...J,amount:parseInt(J.amount)||0}),Q(null)};return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-c-text",children:"ìžì£¼ ì“°ëŠ” í•­ëª©"}),e.jsx("button",{onClick:()=>N(!b),className:`p-2 rounded-xl transition-colors ${b?"text-[#3182F6] bg-[#3182F6]/10":"text-c-text3"}`,children:e.jsx(G,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.map((i,$)=>e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>!b&&fe(i),className:`w-full rounded-2xl py-8 px-5 text-center transition-all border border-c-border ${b?"opacity-80":"hover:bg-c-subtle active:scale-95"}`,children:[e.jsxs("div",{className:"text-lg font-bold text-c-text mb-1.5",children:[e.jsx("span",{className:"text-sm mr-1",children:i.icon}),i.label]}),e.jsx("div",{className:"text-base text-c-text2",children:h?"â€¢â€¢â€¢â€¢â€¢":C(i.amount)})]}),b&&e.jsx("button",{onClick:()=>f(z=>z.filter((at,Ce)=>Ce!==$)),className:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center shadow-md",children:e.jsx(ke,{size:16})})]},`${i.label}-${$}`)),b&&e.jsxs("button",{onClick:()=>j(!w),className:"rounded-2xl py-8 px-5 text-center border-2 border-dashed border-c-border hover:border-[#3182F6]/50",children:[e.jsx(re,{size:32,className:"mx-auto text-c-text3 mb-3"}),e.jsx("div",{className:"text-lg text-c-text3",children:"ì¶”ê°€"})]})]}),w&&b&&e.jsxs("div",{className:"mt-3 p-4 border border-c-border rounded-2xl space-y-2 animate-fade",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ë¼ë²¨"}),e.jsx("input",{type:"text",value:v.label,onChange:i=>D({...v,label:i.target.value}),placeholder:"í•­ëª©ëª…"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê¸ˆì•¡"}),e.jsx("input",{type:"number",value:v.amount,onChange:i=>D({...v,amount:i.target.value}),placeholder:"ê¸ˆì•¡"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("select",{value:v.category,onChange:i=>D({...v,category:i.target.value}),children:m.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ì•„ì´ì½˜"}),e.jsx("input",{type:"text",value:v.icon,onChange:i=>D({...v,icon:i.target.value}),placeholder:"ðŸš"})]})]}),e.jsx("button",{onClick:()=>{!v.label||!v.amount||(f(i=>[...i,{label:v.label,amount:parseInt(v.amount),category:v.category,icon:v.icon}]),D({label:"",amount:"",category:m[0]||"ì‹ë¹„",icon:"ðŸš"}),j(!1))},className:"w-full btn-primary py-2.5 text-sm",children:"í•­ëª© ì¶”ê°€"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>t(!l),className:"flex items-center justify-center gap-3 py-6 px-5 rounded-2xl border border-c-border text-lg font-bold text-c-text active:scale-[0.98]",children:[e.jsx(re,{size:26,className:"text-[#3182F6]"})," ì§ì ‘ ìž…ë ¥"]}),e.jsxs("button",{onClick:()=>x(!a),className:"flex items-center justify-center gap-3 py-6 px-5 rounded-2xl border border-c-border text-lg font-bold text-c-text active:scale-[0.98]",children:[e.jsx(Ve,{size:26,className:"text-green-500"})," SMS ìž…ë ¥"]}),e.jsxs("button",{className:"flex items-center justify-center gap-3 py-6 px-5 rounded-2xl border border-c-border text-lg font-bold text-c-text opacity-50",children:[e.jsx(Be,{size:26,className:"text-purple-500"})," ì˜ìˆ˜ì¦ OCR"]}),e.jsxs("button",{className:"flex items-center justify-center gap-3 py-6 px-5 rounded-2xl border border-c-border text-lg font-bold text-c-text opacity-50",children:[e.jsx(Ke,{size:26,className:"text-orange-500"})," ìŒì„± ìž…ë ¥"]})]}),l&&e.jsxs("div",{className:"p-4 border border-c-border rounded-2xl space-y-3 animate-fade",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"ì§ì ‘ ìž…ë ¥"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê¸ˆì•¡"}),e.jsx("input",{type:"number",value:S.amount,onChange:i=>g({...S,amount:i.target.value}),placeholder:"ê¸ˆì•¡ ìž…ë ¥"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("select",{value:S.category,onChange:i=>g({...S,category:i.target.value}),children:m.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê²°ì œìˆ˜ë‹¨"}),e.jsx("select",{value:S.payment,onChange:i=>g({...S,payment:i.target.value}),children:o.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ìž¥ì†Œ"}),e.jsx("input",{type:"text",value:S.place,onChange:i=>{g({...S,place:i.target.value}),ge(i.target.value)},placeholder:"ìž¥ì†Œ (ì„ íƒ)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ë©”ëª¨"}),e.jsx("input",{type:"text",value:S.memo,onChange:i=>g({...S,memo:i.target.value}),placeholder:"ë©”ëª¨ (ì„ íƒ)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:ae,type:"file",accept:"image/*",capture:"environment",onChange:i=>pe(i,$=>g(z=>({...z,photo:$}))),className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>ae.current?.click(),className:"flex items-center gap-1 text-xs text-c-text2 border border-c-border rounded-lg px-2 py-1.5",children:[e.jsx(ue,{size:12})," ì˜ìˆ˜ì¦ ì‚¬ì§„"]}),S.photo&&e.jsx("img",{src:S.photo,className:"w-10 h-10 rounded-lg object-cover"})]}),e.jsx("button",{onClick:ve,className:"w-full btn-primary py-3",children:"ì €ìž¥í•˜ê¸°"})]}),a&&e.jsxs("div",{className:"p-4 border border-c-border rounded-2xl space-y-3 animate-fade",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"SMS ìžë™ì¸ì‹"}),e.jsx("textarea",{value:k,onChange:i=>I(i.target.value),placeholder:`ì¹´ë“œ ì‚¬ìš© ë¬¸ìžë¥¼ ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”
ì˜ˆ: [ì‹ í•œ] 15,000ì› ìŠ¹ì¸ ìŠ¤íƒ€ë²…ìŠ¤`,rows:3,className:"w-full border border-c-border text-c-text rounded-2xl p-3 text-sm bg-transparent"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê²°ì œìˆ˜ë‹¨"}),e.jsx("select",{value:T,onChange:i=>F(i.target.value),children:o.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsx("button",{onClick:ye,className:"w-full btn-primary py-3",children:"ì¸ì‹í•˜ê¸°"})]}),ne.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì˜¤ëŠ˜ ìž…ë ¥í•œ ë‚´ì—­"}),e.jsx("div",{className:"space-y-1",children:ne.map(i=>te===i.id?e.jsx(ee,{editForm:J,setEditForm:se,onSave:we,onCancel:()=>Q(null),catNames:m,paymentMethods:o,showRefund:!0,showPhoto:!0},i.id):e.jsx(H,{tx:i,hideAmounts:h,customCategories:c,onEdit:Ne,onDelete:s},i.id))})]}),e.jsx(Ae,{customCategories:c,setCustomCategories:d,showCatManage:W,setShowCatManage:je})]})}const Y=["#FF4757","#3182F6","#00C48C","#7C5CFC","#FF9F43","#FF6B81","#0ABDE3","#8B95A1"];function Ae({customCategories:r,setCustomCategories:h,showCatManage:u,setShowCatManage:f}){const[c,d]=p.useState(null),[o,m]=p.useState({name:"",icon:"",color:""}),[y,s]=p.useState(!1),[n,l]=p.useState({name:"",icon:"ðŸ“Œ",color:Y[0]});return e.jsxs("div",{className:"border border-c-border rounded-2xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>f(!u),className:"w-full flex items-center justify-between px-4 py-3 text-sm font-semibold text-c-text",children:[e.jsx("span",{children:"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬"}),u?e.jsx(oe,{size:16,className:"text-c-text3"}):e.jsx(ie,{size:16,className:"text-c-text3"})]}),u&&e.jsxs("div",{className:"px-4 pb-4 space-y-2 animate-fade",children:[r.map((t,a)=>e.jsx("div",{children:c===a?e.jsxs("div",{className:"p-3 border border-[#3182F6]/30 rounded-xl space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{type:"text",value:o.name,onChange:x=>m({...o,name:x.target.value}),placeholder:"ì´ë¦„",className:"text-sm"}),e.jsx("input",{type:"text",value:o.icon,onChange:x=>m({...o,icon:x.target.value}),placeholder:"ì•„ì´ì½˜",className:"text-sm"}),e.jsx("div",{className:"flex gap-1 items-center flex-wrap",children:Y.map(x=>e.jsx("button",{onClick:()=>m({...o,color:x}),className:`w-5 h-5 rounded-full ${o.color===x?"ring-2 ring-offset-1 ring-[#3182F6]":""}`,style:{backgroundColor:x}},x))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{o.name&&(h(x=>x.map((b,N)=>N===c?{...o}:b)),d(null))},className:"flex-1 btn-primary py-1.5 text-xs",children:[e.jsx(he,{size:12})," ì €ìž¥"]}),e.jsx("button",{onClick:()=>d(null),className:"flex-1 py-1.5 text-xs border border-c-border rounded-xl text-c-text2",children:"ì·¨ì†Œ"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"flex-1 text-sm font-medium text-c-text",children:t.name}),e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.color}}),e.jsx("button",{onClick:()=>{d(a),m({name:t.name,icon:t.icon,color:t.color})},className:"text-c-text3 p-1",children:e.jsx(G,{size:14})}),e.jsx("button",{onClick:()=>h(x=>x.filter((b,N)=>N!==a)),className:"text-c-text3 p-1",children:e.jsx(U,{size:14})})]})},`${t.name}-${a}`)),y?e.jsxs("div",{className:"p-3 border border-dashed border-c-border rounded-xl space-y-2 animate-fade",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:n.name,onChange:t=>l({...n,name:t.target.value}),placeholder:"ì¹´í…Œê³ ë¦¬ ì´ë¦„",className:"text-sm"}),e.jsx("input",{type:"text",value:n.icon,onChange:t=>l({...n,icon:t.target.value}),placeholder:"ì´ëª¨ì§€",className:"text-sm"})]}),e.jsxs("div",{className:"flex gap-1.5 items-center",children:[e.jsx("span",{className:"text-xs text-c-text2 mr-1",children:"ìƒ‰ìƒ"}),Y.map(t=>e.jsx("button",{onClick:()=>l({...n,color:t}),className:`w-5 h-5 rounded-full ${n.color===t?"ring-2 ring-offset-1 ring-[#3182F6]":""}`,style:{backgroundColor:t}},t))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{n.name&&(h(t=>[...t,{...n}]),l({name:"",icon:"ðŸ“Œ",color:Y[0]}),s(!1))},className:"flex-1 btn-primary py-1.5 text-xs",children:"ì¶”ê°€"}),e.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-1.5 text-xs border border-c-border rounded-xl text-c-text2",children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{onClick:()=>s(!0),className:"w-full py-2 border-2 border-dashed border-c-border rounded-xl text-xs text-c-text2 hover:border-[#3182F6]/50",children:"+ ì¹´í…Œê³ ë¦¬ ì¶”ê°€"})]})]})}function qe({transactions:r,hideAmounts:h,customCategories:u,deleteTransaction:f}){const[c,d]=p.useState(()=>{const t=new Date;return{y:t.getFullYear(),m:t.getMonth()}}),[o,m]=p.useState(null),y=new Date().toISOString().split("T")[0],s=p.useMemo(()=>{const t=new Date(c.y,c.m,1),a=new Date(c.y,c.m+1,0),x=Array.from({length:t.getDay()},()=>null);for(let b=1;b<=a.getDate();b++){const N=`${c.y}-${String(c.m+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`,w=r.filter(D=>D.date===N&&!D.refunded),j=w.reduce((D,S)=>D+S.amount,0),v=[...new Set(w.map(D=>D.category))].slice(0,3);x.push({day:b,date:N,total:j,cats:v,count:w.length})}return x},[c,r]),n=p.useMemo(()=>s.reduce((t,a)=>t+(a?.total||0),0),[s]),l=p.useMemo(()=>o?r.filter(t=>t.date===o).sort((t,a)=>a.time.localeCompare(t.time)):[],[r,o]);return e.jsxs("div",{className:"px-4 py-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>d(t=>t.m===0?{y:t.y-1,m:11}:{...t,m:t.m-1}),className:"p-2 rounded-xl active:bg-c-subtle",children:e.jsx(Me,{size:22,className:"text-c-text2"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-c-text",children:[c.y,"ë…„ ",c.m+1,"ì›”"]}),e.jsx("div",{className:"text-xs text-red-400 font-semibold",children:h?"â€¢â€¢â€¢â€¢â€¢":C(n)})]}),e.jsx("button",{onClick:()=>d(t=>t.m===11?{y:t.y+1,m:0}:{...t,m:t.m+1}),className:"p-2 rounded-xl active:bg-c-subtle",children:e.jsx(De,{size:22,className:"text-c-text2"})})]}),e.jsxs("div",{className:"grid grid-cols-7 text-center",children:[["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "].map((t,a)=>e.jsx("div",{className:`text-[11px] font-bold py-2 ${a===0?"text-red-400":a===6?"text-blue-400":"text-c-text3"}`,children:t},t)),s.map((t,a)=>t?e.jsxs("button",{onClick:()=>m(o===t.date?null:t.date),className:`flex flex-col items-center justify-start rounded-xl p-1 min-h-[72px] transition-all border ${o===t.date?"border-[#3182F6] bg-[#3182F6]/8":"border-transparent active:bg-c-subtle"} ${t.date===y&&o!==t.date?"bg-[#3182F6]/5":""}`,children:[e.jsx("div",{className:`text-xs font-bold leading-tight ${t.date===y?"text-[#3182F6]":a%7===0?"text-red-400":a%7===6?"text-blue-400":"text-c-text"}`,children:t.day}),t.total>0&&e.jsx("div",{className:"text-[9px] font-semibold text-red-400 leading-tight mt-0.5",children:h?"Â·Â·Â·":M(t.total)}),t.cats.length>0&&e.jsx("div",{className:"flex gap-[2px] mt-auto pb-0.5",children:t.cats.map((x,b)=>e.jsx("div",{className:"w-[5px] h-[5px] rounded-full",style:{backgroundColor:O(u,x)}},b))})]},a):e.jsx("div",{className:"min-h-[72px]"},a))]}),o&&e.jsxs("div",{className:"glass-inner rounded-2xl p-4 animate-fade",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-bold text-sm text-c-text",children:[o.split("-")[2],"ì¼ ë‚´ì—­"]}),l.length>0&&e.jsx("span",{className:"text-xs font-bold text-red-400",children:h?"â€¢â€¢â€¢â€¢â€¢":C(l.filter(t=>!t.refunded).reduce((t,a)=>t+a.amount,0))})]}),l.length>0?l.map(t=>e.jsx(H,{tx:t,hideAmounts:h,customCategories:u,onDelete:f},t.id)):e.jsx("div",{className:"text-sm text-c-text3 text-center py-6",children:"ì†Œë¹„ê°€ ì—†ëŠ” ë‚ ì´ì—ìš”"})]})]})}function Ue({transactions:r,budget:h,deleteTransaction:u,updateTransaction:f,hideAmounts:c,customCategories:d,paymentMethods:o,catNames:m}){const y=new Date().toISOString().split("T")[0],[s,n]=p.useState(y),[l,t]=p.useState(null),[a,x]=p.useState({}),b=p.useMemo(()=>r.filter(g=>g.date===s).sort((g,k)=>k.time.localeCompare(g.time)),[r,s]),N=b.filter(g=>!g.refunded).reduce((g,k)=>g+k.amount,0),w=Math.round(Object.values(h).reduce((g,k)=>g+k,0)/30),j=p.useMemo(()=>{const g={};return b.filter(k=>!k.refunded).forEach(k=>g[k.category]=(g[k.category]||0)+k.amount),Object.entries(g).map(([k,I])=>({name:k,value:I,fill:O(d,k)}))},[b,d]),v=p.useMemo(()=>{const g=[];for(let k=0;k<7;k++){const I=new Date;I.setDate(I.getDate()-k),g.push(E(I))}return g},[]),D=g=>{t(g.id),x({amount:g.amount,category:g.category,place:g.place||"",memo:g.memo||"",payment:g.payment||"ì¹´ë“œ",refunded:g.refunded||!1,photo:g.photo||null})},S=()=>{f(l,{...a,amount:parseInt(a.amount)||0}),t(null)};return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsx("div",{className:"flex gap-2.5 overflow-x-auto pb-2",children:v.map(g=>e.jsxs("button",{onClick:()=>n(g),className:`px-5 py-3 rounded-xl text-sm whitespace-nowrap min-w-[72px] text-center transition-all ${s===g?"bg-[#3182F6] text-white font-semibold shadow-lg shadow-blue-500/25":"border border-c-border text-c-text2"}`,children:[e.jsx("div",{children:g.substring(5)}),e.jsx("div",{className:"text-xs opacity-70",children:de(g)})]},g))}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"ì˜¤ëŠ˜ ìš”ì•½"}),e.jsx("span",{className:"text-xs text-c-text3",children:s})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-5",children:[e.jsxs("div",{className:"text-center border border-c-border rounded-2xl p-4",children:[e.jsx("div",{className:"text-xs font-medium text-c-text2 mb-2",children:"ì´ ì§€ì¶œ"}),e.jsx("div",{className:"text-base font-bold text-red-500",children:c?"â€¢â€¢â€¢â€¢â€¢":C(N)})]}),e.jsxs("div",{className:"text-center border border-c-border rounded-2xl p-4",children:[e.jsx("div",{className:"text-xs font-medium text-c-text2 mb-2",children:"ì¼ ì˜ˆì‚°"}),e.jsx("div",{className:"text-base font-bold text-c-text",children:c?"â€¢â€¢â€¢â€¢â€¢":C(w)})]}),e.jsxs("div",{className:"text-center border border-c-border rounded-2xl p-4",children:[e.jsx("div",{className:"text-xs font-medium text-c-text2 mb-2",children:"ìž”ì—¬"}),e.jsx("div",{className:`text-base font-bold ${w-N>=0?"text-green-500":"text-red-500"}`,children:c?"â€¢â€¢â€¢â€¢â€¢":C(w-N)})]})]}),j.length>0&&e.jsx("div",{className:"h-32",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(A,{data:j,layout:"vertical",children:[e.jsx(V,{type:"number",hide:!0}),e.jsx(P,{type:"category",dataKey:"name",tick:{fontSize:12,fill:"#8B949E"},width:45,axisLine:!1,tickLine:!1}),e.jsx(R,{content:e.jsx(L,{formatter:g=>C(g)})}),e.jsx(K,{dataKey:"value",radius:[0,8,8,0],children:j.map((g,k)=>e.jsx(xe,{fill:g.fill},k))})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ë‚´ì—­"}),b.length>0?e.jsx("div",{className:"space-y-1",children:b.map(g=>l===g.id?e.jsx(ee,{editForm:a,setEditForm:x,onSave:S,onCancel:()=>t(null),catNames:m,paymentMethods:o,showRefund:!0,showPhoto:!0},g.id):e.jsx(H,{tx:g,hideAmounts:c,customCategories:d,onEdit:D,onDelete:u},g.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-base text-c-text3 mb-2",children:"ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("div",{className:"text-xs text-c-text3",children:"ìœ„ì˜ ë¹ ë¥¸ ìž…ë ¥ì´ë‚˜ ì§ì ‘ ìž…ë ¥ìœ¼ë¡œ ì§€ì¶œì„ ê¸°ë¡í•´ë³´ì„¸ìš”"})]})]})]})}function Ye({transactions:r,deleteTransaction:h,updateTransaction:u,hideAmounts:f,customCategories:c,paymentMethods:d,catNames:o}){const[m,y]=p.useState(""),[s,n]=p.useState(null),[l,t]=p.useState({}),a=p.useMemo(()=>{if(!m.trim())return[];const N=m.toLowerCase();return r.filter(w=>(w.place||"").toLowerCase().includes(N)||(w.memo||"").toLowerCase().includes(N)||w.category.toLowerCase().includes(N)||String(w.amount).includes(m)).sort((w,j)=>j.date.localeCompare(w.date)||j.time.localeCompare(w.time)).slice(0,50)},[m,r]),x=N=>{n(N.id),t({amount:N.amount,category:N.category,place:N.place||"",memo:N.memo||"",payment:N.payment||"ì¹´ë“œ",refunded:N.refunded||!1,photo:N.photo||null})},b=()=>{u(s,{...l,amount:parseInt(l.amount)||0}),n(null)};return e.jsxs("div",{className:"px-5 py-5 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-c-text3"}),e.jsx("input",{type:"text",value:m,onChange:N=>y(N.target.value),placeholder:"ìž¥ì†Œ, ë©”ëª¨, ì¹´í…Œê³ ë¦¬, ê¸ˆì•¡ ê²€ìƒ‰",className:"w-full pl-10 pr-4 py-3 border border-c-border rounded-xl text-sm bg-transparent text-c-text"})]}),m&&e.jsxs("div",{className:"text-xs text-c-text3",children:[a.length,"ê±´"]}),e.jsx("div",{className:"space-y-1",children:a.map(N=>s===N.id?e.jsx(ee,{editForm:l,setEditForm:t,onSave:b,onCancel:()=>n(null),catNames:o,paymentMethods:d,showRefund:!0,showPhoto:!0},N.id):e.jsx(H,{tx:N,hideAmounts:f,customCategories:c,onEdit:x,onDelete:h,showDate:!0},N.id))})]})}function He({transactions:r,budget:h,hideAmounts:u,profile:f}){const c=p.useMemo(()=>{const o=[],m=new Date,y=m.getDay(),s=new Date(m);s.setDate(m.getDate()-(y===0?6:y-1));for(let n=0;n<7;n++){const l=new Date(s);l.setDate(s.getDate()+n);const t=E(l),a=r.filter(x=>x.date===t&&!x.refunded);o.push({day:de(l),date:t.substring(5),amount:a.reduce((x,b)=>x+b.amount,0)})}return o},[r]),d=c.reduce((o,m)=>o+m.amount,0);return e.jsx("div",{className:"px-5 py-5 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì£¼ê°„ ìš”ì•½"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-5 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-red-500 mb-2",children:"ì£¼ê°„ ì§€ì¶œ"}),e.jsx("div",{className:"text-xl font-bold text-red-500",children:u?"â€¢â€¢â€¢â€¢â€¢":M(d)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-5 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-c-text2 mb-2",children:"ì¼ í‰ê· "}),e.jsx("div",{className:"text-xl font-bold text-c-text",children:u?"â€¢â€¢â€¢â€¢â€¢":C(Math.round(d/7))})]})]}),e.jsx("div",{className:"h-44",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(A,{data:c,children:[e.jsx(V,{dataKey:"day",tick:{fontSize:12,fill:"#8B949E"},axisLine:!1,tickLine:!1}),e.jsx(P,{width:50,tick:{fontSize:10,fill:"#8B949E"},tickFormatter:o=>M(o),axisLine:!1,tickLine:!1}),e.jsx(R,{content:e.jsx(L,{formatter:o=>C(o)})}),e.jsx(K,{dataKey:"amount",fill:"#FF4757",radius:[8,8,0,0]})]})})})]})})}function Qe({transactions:r,budget:h,setBudget:u,profile:f,fixedExpenses:c,hideAmounts:d,customCategories:o,catNames:m}){const y=new Date().toISOString().substring(0,7),s=p.useMemo(()=>r.filter(j=>j.date.startsWith(y)),[r,y]),n=s.filter(j=>!j.refunded).reduce((j,v)=>j+v.amount,0),l=c.reduce((j,v)=>j+v.amount,0),t=n+l,a=f.salary-t,x=(a/f.salary*100).toFixed(1),b=p.useMemo(()=>{const j={};return s.filter(v=>!v.refunded).forEach(v=>j[v.category]=(j[v.category]||0)+v.amount),c.forEach(v=>j[v.category]=(j[v.category]||0)+v.amount),Object.entries(j).map(([v,D])=>({name:v,value:D,budget:h[v]||0,usage:h[v]?(D/h[v]*100).toFixed(0):"-",fill:O(o,v)})).sort((v,D)=>D.value-v.value)},[s,c,h,o]),N=b.map(j=>({name:j.name,value:j.value})),w=b.filter(j=>j.budget>0&&parseInt(j.usage)>=80);return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[w.length>0&&e.jsx("div",{className:"space-y-2",children:w.map(j=>e.jsxs("div",{className:`p-3 rounded-xl text-sm font-semibold ${parseInt(j.usage)>=100?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:["âš ï¸ ",j.name," ì˜ˆì‚° ",j.usage,"% ì‚¬ìš©",parseInt(j.usage)>=100?" - ì´ˆê³¼!":""]},j.name))}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-c-text",children:"ì›”ê°„ ìš”ì•½"}),e.jsxs("button",{onClick:()=>be(s,`ì§€ì¶œ_${y}.csv`),className:"flex items-center gap-1 text-xs text-[#3182F6] font-semibold",children:[e.jsx(me,{size:14})," CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-5",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-green-500 mb-2",children:"ìˆ˜ìž…"}),e.jsx("div",{className:"text-base font-bold text-green-500",children:d?"â€¢â€¢â€¢â€¢â€¢":M(f.salary)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-red-500 mb-2",children:"ì§€ì¶œ"}),e.jsx("div",{className:"text-base font-bold text-red-500",children:d?"â€¢â€¢â€¢â€¢â€¢":M(t)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-purple-500 mb-2",children:"ì €ì¶•"}),e.jsx("div",{className:"text-base font-bold text-purple-500",children:d?"â€¢â€¢â€¢â€¢â€¢":M(a)})]})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-5",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[e.jsx("span",{className:"font-medium text-c-text",children:"ì €ì¶•ë¥ "}),e.jsx("span",{className:"font-bold text-purple-500",children:d?"â€¢â€¢â€¢â€¢â€¢":`${x}%`})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill bg-purple-500",style:{width:`${Math.min(Math.max(parseFloat(x),0),100)}%`}})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì¹´í…Œê³ ë¦¬ë³„"}),N.length>0&&e.jsx("div",{className:"h-52 mb-4",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(Ie,{children:[e.jsx(ze,{data:N,cx:"50%",cy:"50%",innerRadius:45,outerRadius:75,dataKey:"value",paddingAngle:3,cornerRadius:4,children:N.map((j,v)=>e.jsx(xe,{fill:O(o,j.name)},v))}),e.jsx(R,{content:e.jsx(L,{formatter:j=>C(j)})})]})})}),e.jsx("div",{className:"space-y-3",children:b.map(j=>e.jsxs("div",{className:"border-b border-c-border pb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-base font-medium text-c-text",children:j.name}),e.jsx("span",{className:"text-base font-bold text-c-text",children:d?"â€¢â€¢â€¢â€¢â€¢":C(j.value)})]}),j.budget>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:`progress-fill ${parseInt(j.usage)>100?"bg-red-500":parseInt(j.usage)>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(parseInt(j.usage)||0,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-c-text2 mt-1.5",children:[e.jsxs("span",{children:["ì˜ˆì‚° ",e.jsx($e,{value:j.budget,onSave:v=>u(D=>({...D,[j.name]:Math.round(v)})),format:C})]}),e.jsx("span",{className:parseInt(j.usage)>100?"text-red-500 font-bold":"",children:d?"â€¢â€¢â€¢â€¢â€¢":`${j.usage}%`})]})]})]},j.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"AI ë¶„ì„"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsx("div",{className:"font-bold text-green-500 mb-1",children:"ê°•ì "}),e.jsx("p",{className:"text-green-400 text-xs",children:parseFloat(x)>=30?`ì €ì¶•ë¥  ${x}% â€” ë˜ëž˜ ìƒìœ„ê¶Œì´ì—ìš”! ê¾¸ì¤€ížˆ ìœ ì§€í•˜ì„¸ìš”.`:parseFloat(x)>=15?`ì €ì¶•ë¥  ${x}% â€” í‰ê· ì ì´ì—ìš”. ì¡°ê¸ˆë§Œ ë” ì•„ë¼ë©´ í° ì°¨ì´!`:"ê°€ê³„ë¶€ ê¸°ë¡ì„ ì‹œìž‘í•œ ê²ƒ ìžì²´ê°€ í›Œë¥­í•©ë‹ˆë‹¤!"})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsx("div",{className:"font-bold text-yellow-500 mb-1",children:"ê°œì„ ì "}),e.jsx("p",{className:"text-yellow-400 text-xs",children:b.length>0?`${b[0].name}(${d?"â€¢â€¢â€¢â€¢â€¢":C(b[0].value)})ì´ ê°€ìž¥ í° ë¹„ì¤‘ì´ì—ìš”. ì—¬ê¸°ì„œ 10% ì¤„ì´ë©´ ì›” ${d?"â€¢â€¢â€¢â€¢â€¢":C(Math.round(b[0].value*.1))} ì ˆì•½!`:"ì•„ì§ ì§€ì¶œ ë°ì´í„°ê°€ ë¶€ì¡±í•´ìš”. ê¸°ë¡ì„ ê³„ì†í•˜ë©´ ë§žì¶¤ ë¶„ì„ì„ ì œê³µí• ê²Œìš”."})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsx("div",{className:"font-bold text-blue-500 mb-1",children:"ë‹¤ìŒë‹¬ ëª©í‘œ"}),e.jsxs("p",{className:"text-blue-400 text-xs",children:["ì €ì¶•ë¥  ",Math.min(parseFloat(x)+5,50),"%ë¥¼ ëª©í‘œë¡œ í•´ë³´ì„¸ìš”! ì›” ",d?"â€¢â€¢â€¢â€¢â€¢":C(Math.round(f.salary*(Math.min(parseFloat(x)+5,50)/100)))," ì €ì¶• ê°€ëŠ¥"]})]})]})]})]})}function Je({transactions:r,hideAmounts:h,customCategories:u}){const f=new Date,c=f.toISOString().substring(0,7),d=(()=>{const a=new Date(f);return a.setMonth(a.getMonth()-1),a.toISOString().substring(0,7)})(),o=p.useMemo(()=>r.filter(a=>a.date.startsWith(c)&&!a.refunded),[r,c]),m=p.useMemo(()=>r.filter(a=>a.date.startsWith(d)&&!a.refunded),[r,d]),y=o.reduce((a,x)=>a+x.amount,0),s=m.reduce((a,x)=>a+x.amount,0),n=y-s,l=p.useMemo(()=>{const a={};return o.forEach(x=>{a[x.category]=a[x.category]||{cur:0,prev:0},a[x.category].cur+=x.amount}),m.forEach(x=>{a[x.category]=a[x.category]||{cur:0,prev:0},a[x.category].prev+=x.amount}),Object.entries(a).map(([x,b])=>({name:x,cur:b.cur,prev:b.prev,diff:b.cur-b.prev,fill:O(u,x)})).sort((x,b)=>Math.abs(b.diff)-Math.abs(x.diff))},[o,m,u]),t=l.slice(0,6).map(a=>({name:a.name,ì§€ë‚œë‹¬:a.prev,ì´ë²ˆë‹¬:a.cur}));return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì›”ë³„ ë¹„êµ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ì§€ë‚œë‹¬"}),e.jsx("div",{className:"text-lg font-bold text-c-text",children:h?"â€¢â€¢â€¢â€¢â€¢":M(s)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ì´ë²ˆë‹¬"}),e.jsx("div",{className:"text-lg font-bold text-c-text",children:h?"â€¢â€¢â€¢â€¢â€¢":M(y)})]})]}),e.jsx("div",{className:`text-center p-3 rounded-xl text-sm font-bold ${n>0?"bg-red-500/10 text-red-500":"bg-green-500/10 text-green-500"}`,children:h?"â€¢â€¢â€¢â€¢â€¢":`${n>0?"â–²":"â–¼"} ${C(Math.abs(n))} ${n>0?"ë” ì”€":"ì ˆì•½"}`})]}),t.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base text-c-text mb-3",children:"ì¹´í…Œê³ ë¦¬ë³„ ë¹„êµ"}),e.jsx("div",{className:"h-48",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(A,{data:t,children:[e.jsx(V,{dataKey:"name",tick:{fontSize:10,fill:"#8B949E"},axisLine:!1,tickLine:!1}),e.jsx(P,{width:50,tick:{fontSize:9,fill:"#8B949E"},tickFormatter:a=>M(a),axisLine:!1,tickLine:!1}),e.jsx(R,{content:e.jsx(L,{formatter:a=>C(a)})}),e.jsx(K,{dataKey:"ì§€ë‚œë‹¬",fill:"#8B95A1",radius:[4,4,0,0]}),e.jsx(K,{dataKey:"ì´ë²ˆë‹¬",fill:"#3182F6",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base text-c-text mb-3",children:"ì¦ê° ìƒì„¸"}),e.jsx("div",{className:"space-y-1",children:l.map(a=>e.jsxs("div",{className:"flex items-center gap-2 py-2.5 border-b border-c-border last:border-0",children:[e.jsx("span",{className:"text-sm font-medium text-c-text w-16",children:a.name}),e.jsx("div",{className:"flex-1 text-xs text-c-text2",children:h?"â€¢â€¢â€¢â€¢â€¢":`${M(a.prev)} â†’ ${M(a.cur)}`}),e.jsx("span",{className:`text-xs font-bold ${a.diff>0?"text-red-500":a.diff<0?"text-green-500":"text-c-text3"}`,children:h?"â€¢â€¢â€¢â€¢â€¢":`${a.diff>0?"+":""}${M(a.diff)}`})]},a.name))})]})]})}function Xe({transactions:r,hideAmounts:h}){const u=new Date().getFullYear(),f=p.useMemo(()=>Array.from({length:12},(s,n)=>{const l=`${u}-${String(n+1).padStart(2,"0")}`;return{month:`${n+1}ì›”`,total:r.filter(t=>t.date.startsWith(l)&&!t.refunded).reduce((t,a)=>t+a.amount,0)}}),[r,u]),c=f.reduce((s,n)=>s+n.total,0),d=new Date().getMonth()+1,o=d>0?Math.round(c/d):0,m=f.reduce((s,n)=>s.total<n.total?s:n),y=f.filter(s=>s.total>0).reduce((s,n)=>s.total>n.total?s:n,f[0]);return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-c-text",children:[u,"ë…„ ë¦¬í¬íŠ¸"]}),e.jsxs("button",{onClick:()=>be(r.filter(s=>s.date.startsWith(String(u))),`ì§€ì¶œ_${u}.csv`),className:"flex items-center gap-1 text-xs text-[#3182F6] font-semibold",children:[e.jsx(me,{size:14})," CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ì—°ê°„ ì´ ì§€ì¶œ"}),e.jsx("div",{className:"text-lg font-bold text-red-500",children:h?"â€¢â€¢â€¢â€¢â€¢":M(c)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ì›” í‰ê· "}),e.jsx("div",{className:"text-lg font-bold text-c-text",children:h?"â€¢â€¢â€¢â€¢â€¢":M(o)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base text-c-text mb-3",children:"ì›”ë³„ ì¶”ì´"}),e.jsx("div",{className:"h-48",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(Ee,{data:f,children:[e.jsx(V,{dataKey:"month",tick:{fontSize:10,fill:"#8B949E"},axisLine:!1,tickLine:!1}),e.jsx(P,{width:50,tick:{fontSize:10,fill:"#8B949E"},tickFormatter:s=>M(s),axisLine:!1,tickLine:!1}),e.jsx(R,{content:e.jsx(L,{formatter:s=>C(s)})}),e.jsx(Te,{type:"monotone",dataKey:"total",stroke:"#3182F6",strokeWidth:2,dot:{r:3}})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ìµœì†Œ ì§€ì¶œì›”"}),e.jsx("div",{className:"text-sm font-bold text-green-500",children:m.month}),e.jsx("div",{className:"text-xs text-c-text2",children:h?"â€¢â€¢â€¢â€¢â€¢":M(m.total)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ìµœëŒ€ ì§€ì¶œì›”"}),e.jsx("div",{className:"text-sm font-bold text-red-500",children:y.month}),e.jsx("div",{className:"text-xs text-c-text2",children:h?"â€¢â€¢â€¢â€¢â€¢":M(y.total)})]})]})]})}function Ge({profile:r,hideAmounts:h}){const[u,f]=Z("finance_incomes",[]),[c,d]=p.useState(!1),[o,m]=p.useState({source:"",amount:"",date:E(new Date),memo:""}),y=new Date().toISOString().substring(0,7),s=p.useMemo(()=>u.filter(t=>t.date.startsWith(y)),[u,y]),n=s.reduce((t,a)=>t+a.amount,0),l=()=>{!o.source||!o.amount||(f(t=>[...t,{id:_(),source:o.source,amount:parseInt(o.amount),date:o.date,memo:o.memo}]),m({source:"",amount:"",date:E(new Date),memo:""}),d(!1))};return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì´ë²ˆë‹¬ ìˆ˜ìž…"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ê¸‰ì—¬"}),e.jsx("div",{className:"text-base font-bold text-green-500",children:h?"â€¢â€¢â€¢â€¢â€¢":M(r.salary)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ë¶€ìˆ˜ìž…"}),e.jsx("div",{className:"text-base font-bold text-blue-500",children:h?"â€¢â€¢â€¢â€¢â€¢":M(n)})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-xs text-c-text2 mb-1",children:"ì´ ìˆ˜ìž…"}),e.jsx("div",{className:"text-base font-bold text-green-500",children:h?"â€¢â€¢â€¢â€¢â€¢":M(r.salary+n)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-base text-c-text mb-3",children:"ë¶€ìˆ˜ìž… ë‚´ì—­"}),e.jsxs("div",{className:"space-y-1",children:[s.map(t=>e.jsxs("div",{className:"flex items-center gap-2 py-3 border-b border-c-border last:border-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-c-text",children:t.source}),e.jsxs("div",{className:"text-xs text-c-text2",children:[t.date,t.memo&&` Â· ${t.memo}`]})]}),e.jsx("span",{className:"text-sm font-bold text-green-500",children:h?"â€¢â€¢â€¢â€¢â€¢":`+${C(t.amount)}`}),e.jsx("button",{onClick:()=>f(a=>a.filter(x=>x.id!==t.id)),className:"text-c-text3 p-1",children:e.jsx(U,{size:14})})]},t.id)),s.length===0&&e.jsx("div",{className:"text-sm text-c-text3 text-center py-4",children:"ë¶€ìˆ˜ìž… ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤"})]}),e.jsx("button",{onClick:()=>d(!c),className:"w-full mt-3 py-2.5 border-2 border-dashed border-c-border rounded-2xl text-sm text-c-text2",children:"+ ìˆ˜ìž… ì¶”ê°€"})]}),c&&e.jsxs("div",{className:"p-4 border border-c-border rounded-2xl space-y-3 animate-fade",children:[e.jsx("input",{type:"text",value:o.source,onChange:t=>m({...o,source:t.target.value}),placeholder:"ìˆ˜ìž…ì› (ì˜ˆ: ê³¼ì™¸, ìš©ëˆ)"}),e.jsx("input",{type:"number",value:o.amount,onChange:t=>m({...o,amount:t.target.value}),placeholder:"ê¸ˆì•¡"}),e.jsx("input",{type:"date",value:o.date,onChange:t=>m({...o,date:t.target.value})}),e.jsx("input",{type:"text",value:o.memo,onChange:t=>m({...o,memo:t.target.value}),placeholder:"ë©”ëª¨ (ì„ íƒ)"}),e.jsx("button",{onClick:l,className:"w-full btn-primary py-3",children:"ì¶”ê°€í•˜ê¸°"})]})]})}function Ze({hideAmounts:r}){const[h,u]=Z("finance_installments",[]),[f,c]=p.useState(!1),[d,o]=p.useState({name:"",totalAmount:"",months:"3",startDate:E(new Date)}),m=h.reduce((s,n)=>{const l=new Date(n.startDate);return l.setMonth(l.getMonth()+n.months),new Date<l?s+Math.round(n.totalAmount/n.months):s},0),y=()=>{!d.name||!d.totalAmount||(u(s=>[...s,{id:_(),name:d.name,totalAmount:parseInt(d.totalAmount),months:parseInt(d.months),startDate:d.startDate}]),o({name:"",totalAmount:"",months:"3",startDate:E(new Date)}),c(!1))};return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-c-text",children:"í• ë¶€ ê´€ë¦¬"}),e.jsxs("div",{className:"text-sm font-bold text-orange-500",children:["ì›” ",r?"â€¢â€¢â€¢â€¢â€¢":C(m)]})]}),e.jsxs("div",{className:"space-y-3",children:[h.map(s=>{const n=Math.round(s.totalAmount/s.months),l=Math.max(1,Math.min(s.months,Math.ceil((new Date-new Date(s.startDate))/(720*60*60*1e3)))),t=Math.max(0,s.months-l),a=Math.round(l/s.months*100);return e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-base font-semibold text-c-text",children:s.name}),e.jsx("button",{onClick:()=>u(x=>x.filter(b=>b.id!==s.id)),className:"text-c-text3",children:e.jsx(U,{size:14})})]}),e.jsxs("div",{className:"text-xs text-c-text2 mb-2",children:["ì›” ",r?"â€¢â€¢â€¢â€¢â€¢":C(n)," Â· ",l,"/",s.months,"ê°œì›” Â· ìž”ì—¬ ",t,"ê°œì›”"]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill bg-orange-500",style:{width:`${a}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-c-text2 mt-1",children:[e.jsxs("span",{children:["ë‚©ë¶€ ",r?"â€¢â€¢â€¢â€¢â€¢":C(n*l)]}),e.jsxs("span",{children:["ì´ ",r?"â€¢â€¢â€¢â€¢â€¢":C(s.totalAmount)]})]})]},s.id)}),h.length===0&&e.jsx("div",{className:"text-sm text-c-text3 text-center py-4",children:"ë“±ë¡ëœ í• ë¶€ê°€ ì—†ìŠµë‹ˆë‹¤"})]}),e.jsx("button",{onClick:()=>c(!f),className:"w-full mt-3 py-2.5 border-2 border-dashed border-c-border rounded-2xl text-sm text-c-text2",children:"+ í• ë¶€ ì¶”ê°€"})]}),f&&e.jsxs("div",{className:"p-4 border border-c-border rounded-2xl space-y-3 animate-fade",children:[e.jsx("input",{type:"text",value:d.name,onChange:s=>o({...d,name:s.target.value}),placeholder:"í•­ëª©ëª… (ì˜ˆ: ë…¸íŠ¸ë¶, TV)"}),e.jsx("input",{type:"number",value:d.totalAmount,onChange:s=>o({...d,totalAmount:s.target.value}),placeholder:"ì´ ê¸ˆì•¡"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê°œì›”ìˆ˜"}),e.jsx("select",{value:d.months,onChange:s=>o({...d,months:s.target.value}),children:[2,3,6,10,12,18,24,36].map(s=>e.jsxs("option",{value:s,children:[s,"ê°œì›”"]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ì‹œìž‘ì¼"}),e.jsx("input",{type:"date",value:d.startDate,onChange:s=>o({...d,startDate:s.target.value})})]})]}),e.jsx("button",{onClick:y,className:"w-full btn-primary py-3",children:"ì¶”ê°€í•˜ê¸°"})]})]})}function et({fixedExpenses:r,setFixedExpenses:h,hideAmounts:u,customCategories:f,catNames:c}){const[d,o]=p.useState(!1),[m,y]=p.useState({name:"",amount:"",day:"1",category:c[0]||"ìƒí™œ",alert:!0}),s=r.reduce((t,a)=>t+a.amount,0),n=new Date().getDate(),l=r.filter(t=>t.day>=n).sort((t,a)=>t.day-a.day);return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"ê³ ì •ì§€ì¶œ ê´€ë¦¬"}),e.jsxs("div",{className:"text-sm font-bold text-red-500",children:["ì›” ",u?"â€¢â€¢â€¢â€¢â€¢":C(s)]})]}),e.jsx("div",{className:"space-y-1",children:r.map(t=>e.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-c-border last:border-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-base font-medium text-c-text",children:t.name}),e.jsxs("div",{className:"text-sm text-c-text2",children:["ë§¤ì›” ",t.day,"ì¼ Â· ",e.jsx("span",{style:{color:O(f,t.category)},children:t.category})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-3 shrink-0",children:[e.jsx("span",{className:"text-base font-bold text-red-500",children:u?"â€¢â€¢â€¢â€¢â€¢":C(t.amount)}),e.jsx("button",{onClick:()=>h(a=>a.filter(x=>x.id!==t.id)),className:"text-c-text3",children:e.jsx(U,{size:16})})]})]},t.id))}),e.jsx("button",{onClick:()=>o(!d),className:"w-full mt-4 py-2.5 border-2 border-dashed border-c-border rounded-2xl text-sm text-c-text2",children:"+ ê³ ì •ì§€ì¶œ ì¶”ê°€"})]}),d&&e.jsxs("div",{className:"p-4 border border-c-border rounded-2xl space-y-3 animate-fade",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"ê³ ì •ì§€ì¶œ ì¶”ê°€"}),e.jsx("input",{type:"text",value:m.name,onChange:t=>y({...m,name:t.target.value}),placeholder:"í•­ëª©ëª…"}),e.jsx("input",{type:"number",value:m.amount,onChange:t=>y({...m,amount:t.target.value}),placeholder:"ê¸ˆì•¡"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ê²°ì œì¼"}),e.jsx("select",{value:m.day,onChange:t=>y({...m,day:t.target.value}),children:Array.from({length:28},(t,a)=>a+1).map(t=>e.jsxs("option",{value:t,children:[t,"ì¼"]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("select",{value:m.category,onChange:t=>y({...m,category:t.target.value}),children:c.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("button",{onClick:()=>{!m.name||!m.amount||(h(t=>[...t,{id:_(),name:m.name,amount:parseInt(m.amount),day:parseInt(m.day),category:m.category,alert:m.alert}]),y({name:"",amount:"",day:"1",category:c[0]||"ìƒí™œ",alert:!0}),o(!1))},className:"w-full btn-primary py-3",children:"ì¶”ê°€í•˜ê¸°"})]}),l.length>0&&e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-3 text-[#FF9F43]",children:"ë‹¤ê°€ì˜¤ëŠ” ê²°ì œ"}),l.map(t=>e.jsxs("div",{className:"flex justify-between text-sm py-1.5",children:[e.jsxs("span",{className:"text-c-text2",children:[t.day,"ì¼ - ",t.name]}),e.jsx("span",{className:"font-bold text-[#FF9F43]",children:u?"â€¢â€¢â€¢â€¢â€¢":C(t.amount)})]},t.id)),e.jsxs("div",{className:"border-t border-c-border mt-2 pt-2 flex justify-between text-sm font-bold text-[#FF9F43]",children:[e.jsx("span",{children:"ì´ ì˜ˆì •ì•¡"}),e.jsx("span",{children:u?"â€¢â€¢â€¢â€¢â€¢":C(l.reduce((t,a)=>t+a.amount,0))})]})]})]})}function tt({transactions:r,budget:h,hideAmounts:u}){const[f,c]=Z("finance_challenges",[]),d=new Date().toISOString().substring(0,7),o=r.filter(l=>l.date.startsWith(d)&&!l.refunded),m=[{id:"food50",name:"ì‹ë¹„ 50ë§Œì› ì´í•˜",target:5e5,getCurrent:l=>l.filter(t=>t.category==="ì‹ë¹„").reduce((t,a)=>t+a.amount,0)},{id:"transport15",name:"êµí†µë¹„ 15ë§Œì› ì´í•˜",target:15e4,getCurrent:l=>l.filter(t=>t.category==="êµí†µ").reduce((t,a)=>t+a.amount,0)},{id:"nospend5",name:"ë¬´ì§€ì¶œ ë°ì´ 5ì¼",target:5,getCurrent:l=>new Date().getDate()-new Set(l.map(t=>t.date)).size,type:"count"}],y=[{id:"coffee3",name:"ì»¤í”¼ ë¹„ìš© 3ë§Œì› ì´í•˜",target:3e4,getCurrent:l=>l.filter(t=>(t.place||"").includes("ì»¤í”¼")||(t.place||"").includes("ìŠ¤íƒ€ë²…ìŠ¤")||(t.place||"").includes("ì´ë””ì•¼")).reduce((t,a)=>t+a.amount,0)},{id:"save40",name:"í•œë‹¬ ì €ì¶•ë¥  40%",target:40,getCurrent:()=>40,type:"rate"},{id:"noeat7",name:"1ì£¼ì¼ ì™¸ì‹ ì œë¡œ",target:0,getCurrent:l=>{const t=new Date;t.setDate(t.getDate()-7);const a=t.toISOString().split("T")[0];return l.filter(x=>x.date>=a&&(x.place||"").match(/ì™¸ì‹|ì‹ë‹¹|ë§›ì§‘|ë ˆìŠ¤í† ëž‘/)).length},type:"zero"}],s=[...m,...y.filter(l=>f.includes(l.id))],n=y.filter(l=>!f.includes(l.id));return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì§„í–‰ ì¤‘ ì±Œë¦°ì§€"}),e.jsx("div",{className:"space-y-4",children:s.map(l=>{const t=l.getCurrent(o),a=l.type==="count"?t>=l.target:l.type==="zero"?t===0:t<=l.target,x=l.type==="count"?Math.min(t/l.target*100,100):l.type==="zero"?t===0?100:0:Math.max((l.target-t)/l.target*100,0);return e.jsxs("div",{className:`border rounded-2xl p-6 ${a?"border-green-500/30 bg-green-500/5":"border-c-border"}`,children:[e.jsxs("div",{className:"flex justify-between mb-2.5",children:[e.jsx("span",{className:"text-base font-semibold text-c-text",children:l.name}),e.jsx("span",{className:`text-sm font-bold ${a?"text-green-500":"text-orange-500"}`,children:a?"ë‹¬ì„±!":l.type==="count"?`${t}/${l.target}ì¼`:`${u?"â€¢â€¢â€¢â€¢â€¢":C(t)} / ${u?"â€¢â€¢â€¢â€¢â€¢":C(l.target)}`})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:`progress-fill ${a?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(x,100)}%`}})})]},l.id)})})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì¶”ì²œ ì±Œë¦°ì§€"}),e.jsx("div",{className:"space-y-3",children:n.map(l=>e.jsxs("div",{className:"flex items-center justify-between border border-c-border rounded-2xl p-6",children:[e.jsx("span",{className:"text-base font-medium text-c-text",children:l.name}),e.jsx("button",{onClick:()=>c(t=>[...t,l.id]),className:"text-sm bg-[#3182F6] text-white px-5 py-2 rounded-xl font-semibold active:scale-95 transition-transform",children:"ì°¸ì—¬"})]},l.id))})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 text-green-500",children:"ë³´ìƒ ì‹œìŠ¤í…œ"}),e.jsxs("p",{className:"text-xs text-green-400",children:["ì±Œë¦°ì§€ ë‹¬ì„± ì‹œ ë°°ì§€ë¥¼ íšë“í•  ìˆ˜ ìžˆì–´ìš”! (",s.filter(l=>l.getCurrent(o)<=(l.type==="count"?-1:l.target)).length,"/",s.length," ë‹¬ì„±)"]})]})]})}function st({transactions:r,hideAmounts:h,customCategories:u}){const f=new Date().toISOString().substring(0,7),c=p.useMemo(()=>r.filter(s=>s.date.startsWith(f)&&!s.refunded),[r,f]),d=p.useMemo(()=>{const s=[{label:"07-09",min:7,max:9,amount:0},{label:"09-12",min:9,max:12,amount:0},{label:"12-14",min:12,max:14,amount:0},{label:"14-18",min:14,max:18,amount:0},{label:"18-21",min:18,max:21,amount:0},{label:"21-24",min:21,max:24,amount:0}];return c.forEach(n=>{const l=parseInt(n.time.split(":")[0]),t=s.find(a=>l>=a.min&&l<a.max);t&&(t.amount+=n.amount)}),s},[c]),o=p.useMemo(()=>{const s=["ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† ","ì¼"].map(n=>({day:n,amount:0}));return c.forEach(n=>{const l=new Date(n.date).getDay();s[l===0?6:l-1].amount+=n.amount}),s},[c]),m=p.useMemo(()=>{const s={};return c.forEach(n=>{const l=n.payment||"ê¸°íƒ€";s[l]=(s[l]||0)+n.amount}),Object.entries(s).map(([n,l])=>({name:n,value:l}))},[c]),y=p.useMemo(()=>{const s={};return c.forEach(n=>{n.place&&(s[n.place]||(s[n.place]={count:0,amount:0}),s[n.place].count++,s[n.place].amount+=n.amount)}),Object.entries(s).sort((n,l)=>l[1].count-n[1].count).slice(0,5).map(([n,l])=>({name:n,...l}))},[c]);return e.jsxs("div",{className:"px-5 py-5 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ì‹œê°„ëŒ€ë³„ ì§€ì¶œ"}),e.jsx("div",{className:"h-44",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(A,{data:d,children:[e.jsx(V,{dataKey:"label",tick:{fontSize:11,fill:"#8B949E"},axisLine:!1,tickLine:!1}),e.jsx(P,{width:50,tick:{fontSize:10,fill:"#8B949E"},tickFormatter:s=>M(s),axisLine:!1,tickLine:!1}),e.jsx(R,{content:e.jsx(L,{formatter:s=>C(s)})}),e.jsx(K,{dataKey:"amount",fill:"#3182F6",radius:[8,8,0,0]})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ìš”ì¼ë³„ íŒ¨í„´"}),e.jsx("div",{className:"h-44",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(A,{data:o,children:[e.jsx(V,{dataKey:"day",tick:{fontSize:12,fill:"#8B949E"},axisLine:!1,tickLine:!1}),e.jsx(P,{width:50,tick:{fontSize:10,fill:"#8B949E"},tickFormatter:s=>M(s),axisLine:!1,tickLine:!1}),e.jsx(R,{content:e.jsx(L,{formatter:s=>C(s)})}),e.jsx(K,{dataKey:"amount",fill:"#7C5CFC",radius:[8,8,0,0]})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ê²°ì œ ìˆ˜ë‹¨ë³„"}),e.jsx("div",{className:"space-y-2.5",children:m.sort((s,n)=>n.value-s.value).map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs w-20 text-c-text2 font-medium",children:s.name}),e.jsx("div",{className:"flex-1 h-6 border border-c-border rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#3182F6] rounded-full transition-all duration-500",style:{width:`${s.value/Math.max(...m.map(n=>n.value))*100}%`}})}),e.jsx("span",{className:"text-xs font-bold text-c-text w-20 text-right",children:h?"â€¢â€¢â€¢â€¢â€¢":M(s.value)})]},s.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"ìžì£¼ ê°€ëŠ” ê³³ TOP 5"}),e.jsxs("div",{className:"space-y-2",children:[y.map((s,n)=>e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("span",{className:"w-7 h-7 rounded-full bg-[#3182F6] text-white text-xs flex items-center justify-center font-bold",children:n+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-c-text",children:s.name}),e.jsxs("div",{className:"text-xs text-c-text2",children:[s.count,"íšŒ ë°©ë¬¸"]})]}),e.jsx("span",{className:"text-sm font-bold text-c-text",children:h?"â€¢â€¢â€¢â€¢â€¢":C(s.amount)})]},s.name)),y.length===0&&e.jsx("div",{className:"text-sm text-c-text3 text-center py-6",children:"ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤"})]})]}),e.jsxs("div",{className:"border border-c-border rounded-2xl p-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 text-blue-500",children:"AI ì¸ì‚¬ì´íŠ¸"}),e.jsx("div",{className:"text-xs text-blue-400 space-y-1.5",children:(()=>{const s=[],n=d.reduce((b,N)=>b.amount>N.amount?b:N,d[0]);n.amount>0&&s.push(`â€¢ ${n.label}ì‹œì— ê°€ìž¥ ë§Žì´ ì§€ì¶œ (${M(n.amount)})`);const l=o[5].amount+o[6].amount,t=o.slice(0,5).reduce((b,N)=>b+N.amount,0);s.push(l>t/5*2?"â€¢ ì£¼ë§ ì§€ì¶œì´ í‰ì¼ í‰ê· ë³´ë‹¤ ë†’ì•„ìš”. ì£¼ë§ ì˜ˆì‚°ì„ ì„¸ì›Œë³´ì„¸ìš”.":"â€¢ ì£¼ë§ ì ˆì•½ì„ ìž˜ í•˜ê³  ìžˆì–´ìš”!"),y.length>0&&s.push(`â€¢ ${y[0].name}ì— ê°€ìž¥ ìžì£¼ ë°©ë¬¸ (${y[0].count}íšŒ, ${M(y[0].amount)})`);const a=m.find(b=>b.name==="í˜„ê¸ˆ"),x=m.find(b=>b.name==="ì¹´ë“œ");return a&&x&&a.value>x.value&&s.push("â€¢ í˜„ê¸ˆ ì§€ì¶œì´ ë§Žì•„ìš”. ì¹´ë“œë¡œ ì „í™˜í•˜ë©´ ì§€ì¶œ ì¶”ì ì´ ì‰¬ì›Œì ¸ìš”."),s.map((b,N)=>e.jsx("p",{children:b},N))})()})]})]})}export{ut as default};
