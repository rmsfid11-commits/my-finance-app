import{j as e}from"./vendor-motion-CrMIN7Qx.js";import{r as i}from"./vendor-react-CNNLD1ro.js";import{c as O,u as ne,s as ee,h as y,d as E,e as A,i as L,f as _,b as te,X as ce,R as X,E as V,j as re,k as xe,l as ie,m as de}from"./index-BVIMeOt-.js";import{E as oe,C as me}from"./CustomTooltip-BYVCHyIQ.js";import{S as U,P as he}from"./search-D7dO8y9w.js";import{R as J,P as ue,a as je,C as pe,A as be,X as fe,Y as ve,T as Ne,b as ge}from"./vendor-charts-BYsEVaFl.js";import{C as ye,a as se}from"./chevron-up-DZq6uuCZ.js";import{T as ae}from"./trash-2-BtGGTQXl.js";import{E as Z}from"./eye-NxTvEuom.js";import{T as Fe}from"./target-D_3V24VV.js";import"./vendor-firebase-CgghcYGk.js";const Ce=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],we=O("calculator",Ce);const Se=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Pe=O("dollar-sign",Se);const $e=[["path",{d:"M5 12h14",key:"1ays0h"}]],De=O("minus",$e);const Re=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Me=O("wrench",Re),Te=[{id:"portfolio",label:"포트폴리오"},{id:"exchange",label:"환율"},{id:"crypto",label:"코인/김프"},{id:"calc",label:"계산기"},{id:"watchlist",label:"관심종목"},{id:"calendar",label:"경제일정"}],H=[{id:"4h",label:"4시간",interval:"1h",range:"10d"},{id:"1d",label:"일봉",interval:"1d",range:"6mo"},{id:"1w",label:"주봉",interval:"1wk",range:"2y"},{id:"1m",label:"월봉",interval:"1mo",range:"5y"}],q=["#3182F6","#00C48C","#FF9F43","#7C5CFC","#FF4757","#0ABDE3","#FF6B81","#2ED573"],Y=t=>q[t.split("").reduce((h,c)=>h+c.charCodeAt(0),0)%q.length],I=["#818CF8","#34D399","#F472B6","#22D3EE","#FBBF24","#C084FC","#60A5FA","#2DD4BF"];function We({data:t}){const h=i.useRef(null),[c,u]=i.useState(0),[a,d]=i.useState(null);if(i.useEffect(()=>{if(!h.current)return;u(h.current.clientWidth);const m=new ResizeObserver(([C])=>u(C.contentRect.width));return m.observe(h.current),()=>m.disconnect()},[t]),!t?.length)return e.jsx("div",{className:"h-64 flex items-center justify-center text-c-text2 text-sm",children:"차트 데이터 없음"});const r=280,o=24,x=28,l=58,j=c-l,n=r-o-x,N=t.flatMap(m=>[m.high,m.low]).filter(Boolean),g=Math.min(...N),p=Math.max(...N),P=p-g||1,F=m=>o+n*(1-(m-g)/P),b=m=>p-(m-o)/n*P,f=j/t.length,w=Math.max(1.5,Math.min(8,f*.65)),$=(m,C)=>{if(!h.current)return;const T=h.current.getBoundingClientRect(),K=m-T.left,D=C-T.top,R=Math.min(t.length-1,Math.max(0,Math.floor(K/f))),W=t[R],z=b(Math.max(o,Math.min(o+n,D))),B=f*R+f/2;d({x:B,y:Math.max(o,Math.min(o+n,D)),candle:W,price:z})};return e.jsxs("div",{ref:h,className:"relative touch-none select-none",onTouchStart:m=>$(m.touches[0].clientX,m.touches[0].clientY),onTouchMove:m=>{m.preventDefault(),$(m.touches[0].clientX,m.touches[0].clientY)},onTouchEnd:()=>d(null),onMouseMove:m=>$(m.clientX,m.clientY),onMouseLeave:()=>d(null),children:[a?.candle&&e.jsxs("div",{className:"absolute top-0 left-0 right-0 flex flex-wrap gap-x-2.5 text-[10px] font-mono z-10 px-0.5 pointer-events-none",children:[e.jsx("span",{className:"text-c-text2",children:a.candle.date}),e.jsxs("span",{children:["O ",e.jsx("span",{className:"text-c-text font-semibold",children:a.candle.open?.toFixed(2)})]}),e.jsxs("span",{children:["H ",e.jsx("span",{className:"text-[#00C48C] font-semibold",children:a.candle.high?.toFixed(2)})]}),e.jsxs("span",{children:["L ",e.jsx("span",{className:"text-[#FF4757] font-semibold",children:a.candle.low?.toFixed(2)})]}),e.jsxs("span",{children:["C ",e.jsx("span",{className:`font-semibold ${a.candle.close>=a.candle.open?"text-[#00C48C]":"text-[#FF4757]"}`,children:a.candle.close?.toFixed(2)})]})]}),c>0&&e.jsxs("svg",{width:c,height:r,className:"overflow-visible",children:[[0,.25,.5,.75,1].map(m=>{const C=o+n*m,T=p-P*m;return e.jsxs("g",{children:[e.jsx("line",{x1:0,y1:C,x2:j,y2:C,stroke:"var(--c-border)",strokeWidth:.5,opacity:.4}),e.jsx("text",{x:c-3,y:C+3,textAnchor:"end",fill:"var(--c-text3)",fontSize:9,children:T.toFixed(2)})]},m)}),t.filter((m,C)=>C%Math.max(1,Math.ceil(t.length/6))===0).map(m=>{const C=t.indexOf(m);return e.jsx("text",{x:f*C+f/2,y:r-4,textAnchor:"middle",fill:"var(--c-text3)",fontSize:9,children:m.date},C)}),t.map((m,C)=>{if(!m.open||!m.close||!m.high||!m.low)return null;const T=f*C+f/2,D=m.close>=m.open?"#00C48C":"#FF4757",R=F(Math.max(m.open,m.close)),W=F(Math.min(m.open,m.close));return e.jsxs("g",{children:[e.jsx("line",{x1:T,y1:F(m.high),x2:T,y2:F(m.low),stroke:D,strokeWidth:1}),e.jsx("rect",{x:T-w/2,y:R,width:w,height:Math.max(1,W-R),fill:D,rx:.5})]},C)}),a&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:a.x,y1:o,x2:a.x,y2:o+n,stroke:"var(--c-text2)",strokeWidth:.5,strokeDasharray:"4,3",opacity:.7}),e.jsx("line",{x1:0,y1:a.y,x2:j,y2:a.y,stroke:"var(--c-text2)",strokeWidth:.5,strokeDasharray:"4,3",opacity:.7}),e.jsx("rect",{x:j+1,y:a.y-10,width:l-3,height:20,fill:"var(--c-text2)",rx:4}),e.jsx("text",{x:j+l/2,y:a.y+4,textAnchor:"middle",fill:"var(--c-bg)",fontSize:9,fontWeight:"700",children:a.price.toFixed(2)}),a.candle&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:a.x-28,y:o+n+3,width:56,height:17,fill:"var(--c-text2)",rx:4}),e.jsx("text",{x:a.x,y:o+n+14,textAnchor:"middle",fill:"var(--c-bg)",fontSize:8,fontWeight:"700",children:a.candle.date})]}),a.candle&&e.jsx("circle",{cx:a.x,cy:F(a.candle.close),r:3.5,fill:a.candle.close>=a.candle.open?"#00C48C":"#FF4757",stroke:"var(--c-bg)",strokeWidth:2})]})]})]})}function ke({symbol:t}){const[h,c]=i.useState("1d"),[u,a]=i.useState([]),[d,r]=i.useState(!0);return i.useEffect(()=>{r(!0),a([]);const o=H.find(x=>x.id===h)||H[1];re(t,o.range,o.interval).then(x=>{x.length>0&&a(x)}).catch(()=>{}).finally(()=>r(!1))},[t,h]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-1 mb-3",children:H.map(o=>e.jsx("button",{onClick:()=>c(o.id),className:`px-2.5 py-1.5 rounded-lg text-[11px] font-medium transition-all ${h===o.id?"bg-[#3182F6] text-white":"glass-inner text-c-text2"}`,children:o.label},o.id))}),d&&e.jsxs("div",{className:"h-[280px] flex items-center justify-center text-c-text2 text-sm",children:[e.jsx(X,{size:14,className:"animate-spin mr-2"})," 차트 로딩중..."]}),!d&&u.length>0&&e.jsx(We,{data:u}),!d&&u.length===0&&e.jsx("div",{className:"h-[280px] flex items-center justify-center text-c-text2 text-sm",children:"차트 데이터를 불러올 수 없습니다"})]})}function nt(){const{portfolio:t,setPortfolio:h,stockPrices:c,exchangeRate:u,dividends:a,goals:d,watchlist:r,setWatchlist:o,hideAmounts:x}=ne(),[l,j]=i.useState("portfolio");return e.jsx("div",{className:"animate-slide",children:e.jsxs("div",{className:"glass flex-1 flex flex-col",children:[e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Te.map(({id:n,label:N})=>e.jsx("button",{onClick:()=>j(n),className:`py-5 text-base font-bold rounded-xl transition-all ${l===n?"bg-[#3182F6] text-white shadow-md shadow-blue-500/25":"text-c-text2 hover:bg-c-bg active:bg-c-bg"}`,children:N},n))})}),e.jsx("div",{className:"border-t border-c-border mx-5"}),l==="portfolio"&&e.jsx(Ae,{portfolio:t,setPortfolio:h,stockPrices:c,exchangeRate:u,dividends:a,hideAmounts:x}),l==="exchange"&&e.jsx(Ee,{exchangeRate:u,portfolio:t,stockPrices:c,hideAmounts:x}),l==="crypto"&&e.jsx(Ke,{exchangeRate:u,hideAmounts:x}),l==="calc"&&e.jsx(ze,{}),l==="watchlist"&&e.jsx(Xe,{watchlist:r,setWatchlist:o,exchangeRate:u,hideAmounts:x}),l==="calendar"&&e.jsx(Ye,{})]})})}function Ae({portfolio:t,setPortfolio:h,stockPrices:c,exchangeRate:u,dividends:a,hideAmounts:d}){const r=s=>d?"•••••":s,[o,x]=i.useState(null),[l,j]=i.useState({shares:"",price:""}),[n,N]=i.useState(null),[g,p]=i.useState(!1),[P,F]=i.useState(""),[b,f]=i.useState([]),[w,$]=i.useState(!1),m=i.useRef(null),C=u||1450,T=i.useCallback(s=>{if(F(s),m.current&&clearTimeout(m.current),s.length<1){f([]);return}m.current=setTimeout(async()=>{$(!0);const v=await ee(s);f(v),$(!1)},400)},[]),K=s=>{t.some(v=>v.symbol===s.symbol)||(h(v=>[...v,{symbol:s.symbol,name:s.name,shares:0,avgPrice:0,currency:"USD",transactions:[]}]),p(!1),F(""),f([]))},D=i.useMemo(()=>t.map(s=>{const v=c[s.symbol]?.price||s.avgPrice,S=s.shares*v,M=s.shares*s.avgPrice;return{...s,currentPrice:v,valueKRW:S*C,costKRW:M*C,pnlKRW:(S-M)*C,pnlPercent:(S-M)/M*100}}),[t,c,C]),R=D.reduce((s,v)=>s+v.valueKRW,0),W=D.reduce((s,v)=>s+v.costKRW,0),z=s=>{if(!o||!l.shares||!l.price)return;const v=o,S=parseInt(l.shares),M=parseFloat(l.price);h(le=>le.map(k=>{if(k.symbol!==v)return k;const Q={date:new Date().toISOString().split("T")[0],type:s,shares:S,price:M};if(s==="buy"){const G=k.shares+S;return{...k,shares:G,avgPrice:Math.round((k.shares*k.avgPrice+S*M)/G*100)/100,transactions:[...k.transactions,Q]}}return{...k,shares:Math.max(0,k.shares-S),transactions:[...k.transactions,Q]}})),x(null),j({shares:"",price:""})},B=i.useMemo(()=>{const s={};return a.forEach(v=>{const S=v.date.substring(0,7);s[S]=(s[S]||0)+v.amount}),Object.entries(s).map(([v,S])=>({month:v,amount:S}))},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("div",{className:"text-sm text-c-text2",children:"총 평가액"}),e.jsx("div",{className:"text-2xl font-bold text-[#3182F6]",children:d?"•••••":`${y(R)}원`}),e.jsx("div",{className:`text-sm font-semibold ${R-W>=0?"text-[#00C48C]":"text-[#FF4757]"}`,children:d?"•••••":`${R-W>=0?"+":""}${y(R-W)}원 (${W>0?E((R-W)/W*100):"0%"})`})]}),e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsx("div",{className:"px-5 py-3",children:e.jsxs("button",{onClick:()=>p(!0),className:"w-full border border-dashed border-c-border rounded-2xl p-3.5 flex items-center justify-center gap-2 text-[#3182F6] font-semibold text-sm hover:bg-c-subtle transition-colors",children:[e.jsx(U,{size:16})," 종목 검색 / 추가"]})}),D.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"font-bold text-sm text-c-text mb-3",children:"포트폴리오 비중"}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-32 h-32 shrink-0",children:e.jsx(J,{width:"100%",height:"100%",children:e.jsx(ue,{children:e.jsx(je,{data:D.filter(s=>s.valueKRW>0).map(s=>({name:s.symbol,value:s.valueKRW})),cx:"50%",cy:"50%",innerRadius:32,outerRadius:56,paddingAngle:3,dataKey:"value",strokeWidth:0,children:D.filter(s=>s.valueKRW>0).map((s,v)=>e.jsx(pe,{fill:I[v%I.length]},v))})})})}),e.jsx("div",{className:"flex-1 space-y-2.5",children:D.filter(s=>s.valueKRW>0).map((s,v)=>e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:I[v%I.length]}}),e.jsx("span",{className:"text-xs text-c-text font-semibold flex-1",children:s.symbol}),e.jsx("span",{className:"text-xs text-c-text2 font-mono tabular-nums",children:d?"•••":`${R>0?(s.valueKRW/R*100).toFixed(1):0}%`})]},s.symbol))})]})]})]}),D.map(s=>e.jsxs("div",{children:[e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:Y(s.symbol)},children:s.symbol.substring(0,2)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-c-text",children:s.symbol}),e.jsx("div",{className:"text-xs text-c-text2",children:s.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-c-text",children:r(A(s.currentPrice))}),e.jsx("div",{className:`text-xs font-medium ${s.pnlPercent>=0?"text-green-600":"text-red-600"}`,children:r(E(s.pnlPercent))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2.5 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"보유수량"}),e.jsx("div",{className:"font-bold text-sm text-c-text",children:e.jsx(oe,{value:s.shares,onSave:v=>h(S=>S.map(M=>M.symbol===s.symbol?{...M,shares:Math.round(v)}:M)),format:v=>`${L(v)}주`})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"평균단가"}),e.jsx("div",{className:"font-bold text-sm text-c-text",children:r(A(s.avgPrice))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"평가액"}),e.jsx("div",{className:"font-bold text-sm text-c-text",children:r(_(s.valueKRW))})]}),e.jsxs("div",{children:[e.jsx("div",{className:`text-[11px] mb-0.5 ${s.pnlKRW>=0?"text-[#00C48C]":"text-[#FF4757]"}`,children:"손익"}),e.jsx("div",{className:`font-bold text-sm ${s.pnlKRW>=0?"text-[#00C48C]":"text-[#FF4757]"}`,children:r(`${s.pnlKRW>=0?"+":""}${_(s.pnlKRW)}`)})]})]}),e.jsx(ke,{symbol:s.symbol}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>x(s.symbol),className:"flex-1 bg-[#1A2E24] border border-[#243D2F] text-[#6EBF8B] py-3 rounded-xl text-sm font-semibold flex items-center justify-center gap-1.5",children:[e.jsx(he,{size:15})," 매수"]}),e.jsxs("button",{onClick:()=>x(s.symbol),className:"flex-1 bg-[#2A1A1C] border border-[#3D2428] text-[#D4808A] py-3 rounded-xl text-sm font-semibold flex items-center justify-center gap-1.5",children:[e.jsx(De,{size:15})," 매도"]}),e.jsxs("button",{onClick:()=>N(n===s.symbol?null:s.symbol),className:"flex-1 text-c-text2 py-3 rounded-xl text-sm font-medium flex items-center justify-center gap-1.5 border border-c-border",children:[e.jsx(Me,{size:13})," 도구 ",n===s.symbol?e.jsx(ye,{size:13}):e.jsx(se,{size:13})]}),e.jsx("button",{onClick:()=>{confirm(`${s.symbol}을(를) 포트폴리오에서 삭제할까요?`)&&h(v=>v.filter(S=>S.symbol!==s.symbol))},className:"text-red-400 py-3 px-3 rounded-xl text-sm border border-c-border",children:e.jsx(ae,{size:14})})]}),n===s.symbol&&e.jsxs("div",{className:"mt-3 space-y-4",children:[e.jsx("div",{className:"border-t border-c-border"}),e.jsx(_e,{stock:s}),e.jsx("div",{className:"border-t border-c-border"}),e.jsx(He,{stock:s,rate:C})]})]})]},s.symbol)),B.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"font-bold text-base mb-4 text-c-text",children:"배당 수익 (월별)"}),e.jsx("div",{className:"h-48",children:e.jsx(J,{width:"100%",height:"100%",children:e.jsxs(be,{data:B,children:[e.jsx(fe,{dataKey:"month",tick:{fontSize:11,fill:"#8B949E"},axisLine:!1,tickLine:!1}),e.jsx(ve,{width:50,tick:{fontSize:10,fill:"#8B949E"},tickFormatter:s=>_(s),axisLine:!1,tickLine:!1}),e.jsx(Ne,{content:e.jsx(me,{formatter:s=>te(s)})}),e.jsx(ge,{type:"monotone",dataKey:"amount",stroke:"#00C48C",fill:"rgba(0,196,140,0.15)",strokeWidth:2.5,activeDot:{r:5,stroke:"#161B22",strokeWidth:2}})]})})})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-end justify-center z-[100]",onClick:()=>{p(!1),F(""),f([])},children:e.jsxs("div",{className:"glass rounded-t-3xl border-t border-c-glass-border p-6 w-full max-w-[640px] animate-slide max-h-[90vh] flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"w-10 h-1 bg-c-subtle rounded-full mx-auto mb-4"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-c-text",children:"종목 검색"}),e.jsx("button",{onClick:()=>{p(!1),F(""),f([])},className:"text-c-text2",children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(U,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-c-text3"}),e.jsx("input",{type:"text",value:P,onChange:s=>T(s.target.value),placeholder:"티커 또는 종목명 (예: AAPL, Tesla)",className:"pl-10",autoFocus:!0})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 space-y-1.5 pb-[env(safe-area-inset-bottom)]",children:[w&&e.jsx("div",{className:"text-center py-8 text-c-text2 text-sm",children:"검색중..."}),!w&&P&&b.length===0&&e.jsx("div",{className:"text-center py-8 text-c-text2 text-sm",children:"검색 결과 없음"}),!w&&b.map(s=>{const v=t.some(S=>S.symbol===s.symbol);return e.jsxs("button",{onClick:()=>!v&&K(s),disabled:v,className:`w-full flex items-center gap-3 p-4 rounded-lg text-left transition-colors ${v?"opacity-40":"hover:bg-c-bg active:bg-c-bg"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#3182F6]/10 flex items-center justify-center text-[#3182F6] font-bold text-xs",children:s.type==="ETF"?"ETF":s.symbol.substring(0,2)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-sm text-c-text",children:s.symbol}),e.jsx("div",{className:"text-xs text-c-text2 truncate",children:s.name})]}),e.jsx("div",{className:"text-xs text-c-text3",children:s.exchange}),v&&e.jsx("span",{className:"text-xs text-c-text3 font-medium",children:"추가됨"})]},s.symbol)}),!w&&!P&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(U,{size:32,className:"text-c-text3 mx-auto mb-3"}),e.jsx("div",{className:"text-sm text-c-text2",children:"티커 심볼이나 회사명을 검색하세요"}),e.jsx("div",{className:"text-xs text-c-text3 mt-1",children:"미국주식, ETF 등 검색 가능"})]})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-end justify-center z-[100]",onClick:()=>x(null),children:e.jsxs("div",{className:"glass rounded-t-3xl border-t border-c-glass-border p-6 w-full max-w-[640px] animate-slide",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"w-10 h-1 bg-c-subtle rounded-full mx-auto mb-4"}),e.jsxs("h3",{className:"font-bold text-lg mb-4 text-c-text",children:[o," 거래"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"수량"}),e.jsx("input",{type:"number",value:l.shares,onChange:s=>j({...l,shares:s.target.value}),placeholder:"주수 입력"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"가격 (USD)"}),e.jsx("input",{type:"number",step:"0.01",value:l.price,onChange:s=>j({...l,price:s.target.value}),placeholder:"가격 입력"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z("buy"),className:"flex-1 bg-[#1A2E24] border border-[#243D2F] text-[#6EBF8B] py-3.5 rounded-xl font-semibold text-base",children:"매수"}),e.jsx("button",{onClick:()=>z("sell"),className:"flex-1 bg-[#2A1A1C] border border-[#3D2428] text-[#D4808A] py-3.5 rounded-xl font-semibold text-base",children:"매도"})]})]})]})})]})}function Ee({exchangeRate:t,portfolio:h,stockPrices:c,hideAmounts:u}){const a=g=>u?"•••••":g,[d,r]=i.useState(""),[o,x]=i.useState(""),[l,j]=i.useState(!t),n=t||1450,N=h.reduce((g,p)=>g+p.shares*(c[p.symbol]?.price||p.avgPrice),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-5 py-4 text-center",children:[e.jsx("div",{className:"text-xs font-medium text-c-text2 mb-2",children:"USD/KRW 실시간 환율"}),e.jsx("div",{className:"text-4xl font-extrabold text-[#3182F6] mb-1",children:a(`₩${y(n)}`)}),e.jsx("div",{className:"text-xs text-c-text3",children:t?"실시간 반영":"기본값 (API 로딩중)"})]}),e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"font-bold text-base mb-4 text-c-text",children:"환율 계산기"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"USD → KRW"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",value:d,onChange:g=>r(g.target.value),placeholder:"$ 입력",className:"flex-1"}),e.jsx("span",{className:"text-sm font-bold text-c-text2",children:"="}),e.jsx("div",{className:"flex-1 text-sm font-bold text-c-text p-3",children:d?a(`${y(parseFloat(d)*n)}원`):"₩0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"KRW → USD"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",value:o,onChange:g=>x(g.target.value),placeholder:"₩ 입력",className:"flex-1"}),e.jsx("span",{className:"text-sm font-bold text-c-text2",children:"="}),e.jsx("div",{className:"flex-1 text-sm font-bold text-c-text p-3",children:o?a(A(parseFloat(o)/n)):"$0.00"})]})]})]})]}),N>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-3 text-c-text",children:"내 투자 환율 영향"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"해외자산 총액"}),e.jsx("div",{className:"font-bold text-c-text",children:a(A(N))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"원화 환산"}),e.jsx("div",{className:"font-bold text-[#3182F6]",children:a(`${y(N*n)}원`)})]})]}),e.jsx("div",{className:"mt-3 bg-[#00C48C]/8 border border-[#00C48C]/15 rounded-xl p-3 text-sm text-[#00C48C]",children:a(`환율 1원 상승 시 +${y(N)}원 변동`)})]})]})]})}function Ke({exchangeRate:t,hideAmounts:h}){const c=n=>h?"•••••":n,[u,a]=i.useState([]),[d,r]=i.useState(!0),[o,x]=i.useState(!1),l=t||1450,j=async()=>{r(!0),x(!1);const n=["BTC","ETH","XRP"],N=["KRW-BTC","KRW-ETH","KRW-XRP"];try{const g=await Promise.all(n.map(async(p,P)=>{const[F,b]=await Promise.allSettled([xe(`${p}USDT`),ie(N[P])]),f=F.status==="fulfilled"&&F.value?F.value.price*l:0,w=b.status==="fulfilled"&&b.value?b.value.price:0,$=f>0?(w-f)/f*100:0;return{coin:p,binanceUSD:F.status==="fulfilled"&&F.value?F.value.price:0,binanceKRW:f,upbitKRW:w,kimchiAmount:w-f,kimchiPercent:$,change24h:F.status==="fulfilled"&&F.value?F.value.changePercent:0,status:Math.abs($)<2?"적정":$>3?"과열":$<-3?"저평가":"주의"}}));a(g),g.every(p=>p.binanceUSD===0&&p.upbitKRW===0)&&x(!0)}catch{x(!0)}r(!1)};return i.useEffect(()=>{j()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-5 py-3 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"코인 & 김프"}),e.jsxs("button",{onClick:j,className:"text-[#3182F6] text-sm flex items-center gap-1.5 font-medium",children:[e.jsx(X,{size:14,className:d?"animate-spin":""})," 새로고침"]})]}),d&&e.jsxs("div",{className:"text-center py-12 text-c-text2",children:[e.jsx(X,{size:20,className:"animate-spin mx-auto mb-2"}),"데이터 불러오는 중..."]}),o&&!d&&e.jsx("div",{className:"px-5 py-4",children:e.jsxs("div",{className:"bg-[#FF4757]/8 border border-[#FF4757]/15 rounded-2xl p-5 text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-[#FF4757] mb-1",children:"데이터를 불러올 수 없습니다"}),e.jsx("div",{className:"text-xs text-c-text2",children:"네트워크를 확인하고 새로고침 해주세요"})]})}),!d&&!o&&u.map(n=>e.jsxs("div",{children:[e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white text-sm font-bold ${n.coin==="BTC"?"bg-[#F7931A]":n.coin==="ETH"?"bg-[#627EEA]":"bg-[#00AAE4]"}`,children:n.coin.substring(0,1)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg text-c-text",children:n.coin}),e.jsxs("div",{className:`text-xs font-medium ${n.change24h>=0?"text-[#00C48C]":"text-[#FF4757]"}`,children:[n.change24h>=0?"+":"",Number(n.change24h).toFixed(2),"% (24h)"]})]})]}),e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-bold ${n.status==="적정"?"bg-[#00C48C]/12 text-[#00C48C]":n.status==="과열"?"bg-[#FF4757]/12 text-[#FF4757]":n.status==="저평가"?"bg-[#3182F6]/12 text-[#3182F6]":"bg-[#FF9F43]/12 text-[#FF9F43]"}`,children:n.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"해외 (Binance)"}),e.jsx("div",{className:"font-bold text-sm text-c-text",children:c(A(n.binanceUSD))}),e.jsx("div",{className:"text-xs text-c-text3",children:c(`${y(n.binanceKRW)}원`)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] text-c-text3 mb-0.5",children:"한국 (Upbit)"}),e.jsx("div",{className:"font-bold text-sm text-c-text",children:c(`${y(n.upbitKRW)}원`)})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-medium text-c-text2",children:"김치프리미엄"}),e.jsxs("span",{className:`text-lg font-extrabold ${n.kimchiPercent>=0?"text-[#FF4757]":"text-[#3182F6]"}`,children:[n.kimchiPercent>=0?"+":"",n.kimchiPercent.toFixed(2),"%"]}),e.jsxs("span",{className:"text-xs text-c-text3",children:["(",c(`${n.kimchiAmount>=0?"+":""}${y(n.kimchiAmount)}원`),")"]})]})]})]},n.coin))]})}function ze(){const[t,h]=i.useState("compound"),c=[{id:"compound",label:"복리"},{id:"breakeven",label:"손익분기"},{id:"dividend",label:"배당"},{id:"averaging",label:"물타기"},{id:"target",label:"목표자산"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-5 py-3",children:e.jsx("div",{className:"flex gap-1.5 overflow-x-auto",children:c.map(u=>e.jsx("button",{onClick:()=>h(u.id),className:`px-5 py-3 rounded-xl text-base whitespace-nowrap font-bold transition-all ${t===u.id?"bg-[#3182F6] text-white":"text-c-text2"}`,children:u.label},u.id))})}),e.jsx("div",{className:"border-t border-c-border mx-5"}),t==="compound"&&e.jsx(Be,{}),t==="breakeven"&&e.jsx(Ie,{}),t==="dividend"&&e.jsx(Ue,{}),t==="averaging"&&e.jsx(Le,{}),t==="target"&&e.jsx(Oe,{})]})}function Be(){const[t,h]=i.useState("10000000"),[c,u]=i.useState("2000000"),[a,d]=i.useState("10"),[r,o]=i.useState("10"),x=i.useMemo(()=>{const l=parseFloat(t)||0,j=parseFloat(c)||0,n=(parseFloat(a)||0)/100,N=(parseInt(r)||0)*12;let g=l;for(let p=0;p<N;p++)g=g*(1+n/12)+j;return{total:g,profit:g-(l+j*N),invested:l+j*N}},[t,c,a,r]);return e.jsxs("div",{className:"px-5 py-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"복리 계산기"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"초기 투자금"}),e.jsx("input",{type:"number",value:t,onChange:l=>h(l.target.value)}),t&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(t),"원"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"월 적립액"}),e.jsx("input",{type:"number",value:c,onChange:l=>u(l.target.value)}),c&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(c),"원"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"연 수익률 (%)"}),e.jsx("input",{type:"number",value:a,onChange:l=>d(l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"기간 (년)"}),e.jsx("input",{type:"number",value:r,onChange:l=>o(l.target.value)})]}),e.jsxs("div",{className:"glass-inner rounded-2xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"최종 금액"}),e.jsxs("span",{className:"font-bold text-[#3182F6]",children:[y(x.total),"원"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"총 투자금"}),e.jsxs("span",{className:"font-medium text-c-text",children:[y(x.invested),"원"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"수익금"}),e.jsxs("span",{className:"font-bold text-green-500",children:["+",y(x.profit),"원"]})]})]})]})}function Ie(){const[t,h]=i.useState(""),[c,u]=i.useState(""),a=t&&c?(parseFloat(c)-parseFloat(t))/parseFloat(t)*100:0,d=t&&c&&parseFloat(c)<parseFloat(t)?(parseFloat(t)-parseFloat(c))/parseFloat(c)*100:0;return e.jsxs("div",{className:"px-5 py-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"손익분기점 계산기"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"매수가"}),e.jsx("input",{type:"number",value:t,onChange:r=>h(r.target.value),placeholder:"매수가"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"현재가"}),e.jsx("input",{type:"number",value:c,onChange:r=>u(r.target.value),placeholder:"현재가"})]}),t&&c&&e.jsxs("div",{className:"glass-inner rounded-2xl p-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"현재 수익률"}),e.jsx("span",{className:`font-bold ${a>=0?"text-green-500":"text-red-500"}`,children:E(a)})]}),d>0&&e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{className:"text-c-text2",children:"본전까지"}),e.jsxs("span",{className:"font-bold text-orange-500",children:["+",d.toFixed(2),"%"]})]})]})]})}function Ue(){const[t,h]=i.useState("100000000"),[c,u]=i.useState("5"),[a,d]=i.useState("5000000"),r=(parseFloat(t)||0)*(parseFloat(c)||0)/100,o=r/12,x=(parseFloat(a)||0)*12/((parseFloat(c)||1)/100);return e.jsxs("div",{className:"px-5 py-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"배당 계산기"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"투자금"}),e.jsx("input",{type:"number",value:t,onChange:l=>h(l.target.value)}),t&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(t),"원"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"배당률 (%)"}),e.jsx("input",{type:"number",value:c,onChange:l=>u(l.target.value)})]}),e.jsxs("div",{className:"glass-inner rounded-2xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"연 배당"}),e.jsxs("span",{className:"font-bold text-c-text",children:[y(r),"원"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"월 배당"}),e.jsxs("span",{className:"font-bold text-green-500",children:[y(o),"원"]})]})]}),e.jsxs("div",{className:"border-t border-c-border pt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"목표 월 배당"}),e.jsx("input",{type:"number",value:a,onChange:l=>d(l.target.value)}),a&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(a),"원"]})]}),e.jsx("div",{className:"glass-inner rounded-2xl p-4 mt-2",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"필요 투자금"}),e.jsxs("span",{className:"font-bold text-[#3182F6]",children:[y(x),"원"]})]})})]})]})}function Le(){const[t,h]=i.useState("10000"),[c,u]=i.useState("1.02"),[a,d]=i.useState("0.85"),[r,o]=i.useState("5000"),[x,l]=i.useState("0.85"),j=(parseInt(t)||0)+(parseInt(r)||0),n=j>0?((parseInt(t)||0)*(parseFloat(c)||0)+(parseInt(r)||0)*(parseFloat(x)||0))/j:0,N=((parseFloat(a)||0)-(parseFloat(c)||0))/(parseFloat(c)||1)*100,g=((parseFloat(a)||0)-n)/(n||1)*100;return e.jsxs("div",{className:"px-5 py-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"물타기 계산기"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"현재 수량"}),e.jsx("input",{type:"number",value:t,onChange:p=>h(p.target.value)}),t&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(t),"주"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"평균단가"}),e.jsx("input",{type:"number",step:"0.01",value:c,onChange:p=>u(p.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"현재가"}),e.jsx("input",{type:"number",step:"0.01",value:a,onChange:p=>d(p.target.value)})]}),e.jsxs("div",{className:"border-t border-c-border pt-3",children:[e.jsx("div",{className:"text-xs font-bold text-c-text2 mb-2",children:"추가 매수"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"추가 수량"}),e.jsx("input",{type:"number",value:r,onChange:p=>o(p.target.value)}),r&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(r),"주"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"매수 가격"}),e.jsx("input",{type:"number",step:"0.01",value:x,onChange:p=>l(p.target.value)})]})]})]}),e.jsxs("div",{className:"glass-inner rounded-2xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"현재 평단"}),e.jsx("span",{className:"font-semibold text-c-text",children:A(parseFloat(c))})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"새 평단"}),e.jsx("span",{className:"font-bold text-[#3182F6]",children:A(n)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"현재 수익률"}),e.jsx("span",{className:`font-semibold ${N>=0?"text-green-500":"text-red-500"}`,children:E(N)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"물타기 후"}),e.jsx("span",{className:`font-bold ${g>=0?"text-green-500":"text-red-500"}`,children:E(g)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"총 수량"}),e.jsxs("span",{className:"font-semibold text-c-text",children:[y(j),"주"]})]})]}),e.jsxs("div",{className:"bg-[#FF4757]/8 border border-[#FF4757]/15 rounded-xl p-3",children:[e.jsx("div",{className:"text-xs font-bold text-[#FF4757] mb-1",children:"주의사항"}),e.jsxs("ul",{className:"text-xs text-[#FF4757]/80 space-y-0.5",children:[e.jsx("li",{children:"• 물타기는 추가 손실 위험이 있습니다"}),e.jsx("li",{children:"• 단계적 분할 매수를 권장합니다"})]})]})]})}function Oe(){const[t,h]=i.useState("200000000"),[c,u]=i.useState("30000000"),[a,d]=i.useState("2000000"),[r,o]=i.useState("10"),x=i.useMemo(()=>{const l=parseFloat(t)||0,j=parseFloat(c)||0,n=parseFloat(a)||0,N=(parseFloat(r)||0)/100/12;if(n<=0||N<=0)return null;let g=j,p=0;for(;g<l&&p<600;)g=g*(1+N)+n,p++;const P=new Date;return P.setMonth(P.getMonth()+p),{months:p,years:(p/12).toFixed(1),date:P.toLocaleDateString("ko-KR")}},[t,c,a,r]);return e.jsxs("div",{className:"px-5 py-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-base text-c-text",children:"목표 자산 계산기"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"목표 금액"}),e.jsx("input",{type:"number",value:t,onChange:l=>h(l.target.value)}),t&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(t),"원"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"현재 자산"}),e.jsx("input",{type:"number",value:c,onChange:l=>u(l.target.value)}),c&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(c),"원"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"월 저축액"}),e.jsx("input",{type:"number",value:a,onChange:l=>d(l.target.value)}),a&&e.jsxs("div",{className:"text-xs text-c-text3 mt-1",children:[y(a),"원"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-c-text2 font-medium",children:"연 수익률 (%)"}),e.jsx("input",{type:"number",value:r,onChange:l=>o(l.target.value)})]}),x&&e.jsxs("div",{className:"glass-inner rounded-2xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"달성 기간"}),e.jsxs("span",{className:"font-bold text-purple-400",children:[x.years,"년 (",x.months,"개월)"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-c-text2",children:"예상 달성일"}),e.jsx("span",{className:"font-semibold text-c-text",children:x.date})]})]})]})}function _e({stock:t}){const[h,c]=i.useState(""),[u,a]=i.useState(""),d=parseInt(h)||0,r=parseFloat(u)||0,o=t.shares+d,x=o>0?(t.shares*t.avgPrice+d*r)/o:0,l=t.avgPrice>0?(r-t.avgPrice)/t.avgPrice*100:0,j=x>0?(r-x)/x*100:0;return e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"text-sm font-bold text-c-text flex items-center gap-1.5",children:[e.jsx(we,{size:14,className:"text-[#3182F6]"})," 물타기 계산기"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-c-text2",children:[e.jsxs("div",{children:["현재 ",L(t.shares),"주"]}),e.jsxs("div",{children:["평단 $",t.avgPrice.toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"추가 수량"}),e.jsx("input",{type:"number",value:h,onChange:n=>c(n.target.value),placeholder:"주수"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"매수 가격"}),e.jsx("input",{type:"number",step:"0.01",value:u,onChange:n=>a(n.target.value),placeholder:"$"})]})]}),d>0&&r>0&&e.jsxs("div",{className:"border-t border-c-border pt-2.5 space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"새 평단"}),e.jsxs("span",{className:"font-bold text-[#3182F6]",children:["$",x.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"총 수량"}),e.jsxs("span",{className:"font-semibold text-c-text",children:[L(o),"주"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"물타기 전 수익률"}),e.jsxs("span",{className:`font-semibold ${l>=0?"text-green-500":"text-red-500"}`,children:[l>=0?"+":"",l.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"물타기 후 수익률"}),e.jsxs("span",{className:`font-bold ${j>=0?"text-green-500":"text-red-500"}`,children:[j>=0?"+":"",j.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"추가 투자금"}),e.jsxs("span",{className:"text-c-text font-medium",children:["$",(d*r).toFixed(2)]})]})]})]})}function He({stock:t,rate:h}){const[c,u]=i.useState(""),[a,d]=i.useState(""),r=parseFloat(c)||0,o=parseInt(a)||t.shares,x=(r-t.avgPrice)*o,l=x*h,j=t.avgPrice>0?(r-t.avgPrice)/t.avgPrice*100:0,n=r*o;return e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"text-sm font-bold text-c-text flex items-center gap-1.5",children:[e.jsx(Pe,{size:14,className:"text-green-500"})," 수익 계산기"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-c-text2",children:[e.jsxs("div",{children:["보유 ",L(t.shares),"주"]}),e.jsxs("div",{children:["평단 $",t.avgPrice.toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"매도 가격"}),e.jsx("input",{type:"number",step:"0.01",value:c,onChange:N=>u(N.target.value),placeholder:"$"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-c-text2",children:"매도 수량"}),e.jsx("input",{type:"number",value:a,onChange:N=>d(N.target.value),placeholder:`전량 ${t.shares}`})]})]}),r>0&&e.jsxs("div",{className:"border-t border-c-border pt-2.5 space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"매도 총액"}),e.jsxs("span",{className:"font-semibold text-c-text",children:["$",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"손익 (USD)"}),e.jsxs("span",{className:`font-bold ${x>=0?"text-green-500":"text-red-500"}`,children:[x>=0?"+":"","$",x.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"손익 (KRW)"}),e.jsxs("span",{className:`font-bold ${l>=0?"text-green-500":"text-red-500"}`,children:[l>=0?"+":"",te(l)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-c-text2",children:"수익률"}),e.jsxs("span",{className:`font-bold text-lg ${j>=0?"text-green-500":"text-red-500"}`,children:[j>=0?"+":"",j.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"border-t border-c-border pt-2.5 mt-1",children:[e.jsxs("div",{className:"text-xs font-bold text-c-text flex items-center gap-1.5 mb-2",children:[e.jsx(Fe,{size:12,className:"text-[#FF9F43]"})," 목표가"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-c-text3 mb-0.5",children:"+10%"}),e.jsxs("div",{className:"font-bold text-green-500",children:["$",(t.avgPrice*1.1).toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-c-text3 mb-0.5",children:"+20%"}),e.jsxs("div",{className:"font-bold text-green-500",children:["$",(t.avgPrice*1.2).toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-c-text3 mb-0.5",children:"-10%"}),e.jsxs("div",{className:"font-bold text-red-500",children:["$",(t.avgPrice*.9).toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-c-text3 mb-0.5",children:"본전"}),e.jsxs("div",{className:"font-bold text-[#3182F6]",children:["$",t.avgPrice.toFixed(2)]})]})]})]})]})}function Xe({watchlist:t,setWatchlist:h,exchangeRate:c,hideAmounts:u}){const a=b=>u?"•••••":b,[d,r]=i.useState(!1),[o,x]=i.useState(""),[l,j]=i.useState([]),[n,N]=i.useState(!1),[g,p]=i.useState({}),P=i.useRef(null),F=i.useCallback(b=>{if(x(b),P.current&&clearTimeout(P.current),b.length<1){j([]);return}P.current=setTimeout(async()=>{N(!0);const f=await ee(b);j(f),N(!1)},400)},[]);return i.useEffect(()=>{if(t.length===0)return;(async()=>{const f={};for(const w of t){const $=await de(w.symbol);$&&(f[w.symbol]=$)}p(f)})()},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-5 py-3",children:e.jsxs("button",{onClick:()=>r(!0),className:"w-full border border-dashed border-c-border rounded-2xl p-3.5 flex items-center justify-center gap-2 text-[#3182F6] font-semibold text-sm hover:bg-c-subtle transition-colors",children:[e.jsx(Z,{size:16})," 관심종목 추가"]})}),t.map(b=>{const f=g[b.symbol];return e.jsxs("div",{children:[e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:Y(b.symbol)},children:b.symbol.substring(0,2)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-base text-c-text",children:b.symbol}),e.jsx("div",{className:"text-xs text-c-text2 truncate",children:b.name})]}),e.jsx("div",{className:"text-right",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-bold text-c-text",children:a(`$${f.price?.toFixed(2)}`)}),e.jsxs("div",{className:`text-xs font-medium ${f.changePercent>=0?"text-green-500":"text-red-500"}`,children:[f.changePercent>=0?"+":"",f.changePercent?.toFixed(2),"%"]})]}):e.jsx("div",{className:"text-xs text-c-text2",children:"로딩중..."})}),e.jsx("button",{onClick:()=>h(w=>w.filter($=>$.symbol!==b.symbol)),className:"text-red-400 p-2",children:e.jsx(ae,{size:14})})]})]},b.symbol)}),t.length===0&&!d&&e.jsxs("div",{className:"text-center py-12 text-c-text2 px-5",children:[e.jsx(Z,{size:32,className:"mx-auto mb-3 text-c-text3"}),e.jsx("div",{className:"text-sm",children:"관심 종목을 추가해보세요"}),e.jsx("div",{className:"text-xs text-c-text3 mt-1",children:"보유하지 않아도 가격을 추적할 수 있어요"})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-end justify-center z-[100]",onClick:()=>{r(!1),x(""),j([])},children:e.jsxs("div",{className:"glass rounded-t-3xl border-t border-c-glass-border p-6 w-full max-w-[640px] animate-slide max-h-[90vh] flex flex-col",onClick:b=>b.stopPropagation(),children:[e.jsx("div",{className:"w-10 h-1 bg-c-subtle rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"font-bold text-lg text-c-text mb-4",children:"관심종목 검색"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(U,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-c-text3"}),e.jsx("input",{type:"text",value:o,onChange:b=>F(b.target.value),placeholder:"티커 또는 종목명",className:"pl-10",autoFocus:!0})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 space-y-1.5",children:[n&&e.jsx("div",{className:"text-center py-8 text-c-text2 text-sm",children:"검색중..."}),!n&&l.map(b=>{const f=t.some(w=>w.symbol===b.symbol);return e.jsxs("button",{onClick:()=>{f||(h(w=>[...w,{symbol:b.symbol,name:b.name}]),r(!1),x(""),j([]))},disabled:f,className:`w-full flex items-center gap-3 p-4 rounded-lg text-left ${f?"opacity-40":"hover:bg-c-bg"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold text-xs",style:{backgroundColor:Y(b.symbol)},children:b.symbol.substring(0,2)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-sm text-c-text",children:b.symbol}),e.jsx("div",{className:"text-xs text-c-text2 truncate",children:b.name})]}),f&&e.jsx("span",{className:"text-xs text-c-text3",children:"추가됨"})]},b.symbol)})]})]})})]})}function Ye(){new Date().toISOString().split("T")[0];const[t,h]=i.useState(null),c=V.filter(d=>{const r=new Date(d.date),o=new Date,x=new Date(o);return x.setDate(x.getDate()+7),r>=o&&r<=x}),u=V.filter(d=>{const r=new Date(d.date),o=new Date,x=new Date(o);x.setDate(x.getDate()+7);const l=new Date(o);return l.setDate(l.getDate()+14),r>x&&r<=l}),a=(d,r)=>{const o=`${d.date}-${d.name}`,x=t===o;return e.jsxs("div",{className:"border-b border-c-border last:border-0",children:[e.jsxs("button",{onClick:()=>h(x?null:o),className:"w-full flex items-center gap-3 py-3.5 text-left",children:[e.jsxs("div",{className:"text-center min-w-[55px]",children:[e.jsx("div",{className:"text-sm text-c-text2 font-medium",children:d.date.substring(5)}),e.jsx("div",{className:"text-sm text-c-text3",children:d.time})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-c-text",children:d.name}),e.jsxs("div",{className:"text-sm text-c-text2",children:["예상: ",d.forecast," | 전월: ",d.previous]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"flex gap-0.5",children:Array.from({length:d.importance},(l,j)=>e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${d.importance>=4?"bg-[#FF4757]":d.importance>=3?"bg-[#FF9F43]":"bg-[#FFD93D]"}`},j))}),e.jsx(se,{size:12,className:`text-c-text3 transition-transform ${x?"rotate-180":""}`})]})]}),x&&d.impact&&e.jsx("div",{className:"pb-3.5 pl-[67px] pr-3 animate-fade",children:e.jsxs("div",{className:"bg-[#3182F6]/8 border border-[#3182F6]/15 rounded-xl p-3.5",children:[e.jsx("div",{className:"text-[11px] font-bold text-[#3182F6] mb-1.5",children:"시장 영향"}),e.jsx("div",{className:"text-sm text-c-text leading-relaxed",children:d.impact})]})})]},r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"font-bold text-base mb-4 text-c-text",children:"이번주 주요 지표"}),c.length>0?c.map(a):e.jsx("div",{className:"text-sm text-c-text2 text-center py-6",children:"이번주 일정 없음"})]}),e.jsx("div",{className:"border-t border-c-border mx-5"}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsx("h3",{className:"font-bold text-base mb-4 text-c-text",children:"다음주 일정"}),u.length>0?u.map(a):e.jsx("div",{className:"text-sm text-c-text2 text-center py-6",children:"다음주 일정 없음"})]})]})}export{nt as default};
